(this.webpackJsonpcarbon_copy=this.webpackJsonpcarbon_copy||[]).push([[0],{125:function(e,t,n){e.exports=n.p+"static/media/logo512.e400cec2.png"},2097:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(346);var i,l,s,u,p,d=n(4),m=n(288),f=n.n(m),b=n(176),g=n(2146),v=n(112),h=n(321),O=n(2145),y=n(2100),j=n(7),k=n.n(j),E=n(11),C=Object(a.createContext)(),w=function(){var e=Object(a.useContext)(C);if(!e)throw new Error("useWebcam must be used within a WebcamProvider");return e},x=!!(null===(i=navigator)||void 0===i||null===(l=i.mediaDevices)||void 0===l?void 0:l.getUserMedia),S=function(e){var t,n,o,c,i=e.children,l=Object(a.useRef)(),s=Object(a.useRef)(),u=Object(a.useRef)(),p=Object(a.useState)(null),m=Object(d.a)(p,2),f=m[0],b=m[1],g=Object(a.useState)(!0),v=Object(d.a)(g,2),h=v[0],O=v[1],y=Object(a.useState)(!1),j=Object(d.a)(y,2),w=j[0],S=j[1],I=Object(a.useState)([]),T=Object(d.a)(I,2),R=T[0],M=T[1],L=Object(a.useState)(!0),P=Object(d.a)(L,2),N=P[0],A=P[1],D=Object(a.useState)(null),F=Object(d.a)(D,2),U=F[0],_=F[1],B=Object(a.useState)(null),z=Object(d.a)(B,2),Y=z[0],G=z[1],W=Object(a.useState)(null),V=Object(d.a)(W,2),J=V[0],q=V[1],H=Object(a.useState)(!1),X=Object(d.a)(H,2),K=X[0],$=X[1],Z=Object(a.useState)(!1),Q=Object(d.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(a.useState)(void 0),ae=Object(d.a)(ne,2),re=ae[0],oe=ae[1],ce=Object(a.useState)(void 0),ie=Object(d.a)(ce,2),le=ie[0],se=ie[1];Object(a.useEffect)((function(){u.current&&!f?b(u.current.getContext("2d")):f&&!u.current&&b(null)}),[f]),Object(a.useEffect)((function(){if(w&&!U){var e=document.createElement("canvas");e.width=u.current.width,e.height=u.current.height;var t=e.getContext("2d");_({ctx:t,canvas:e})}}),[U,w]);var ue=Object(a.useCallback)((function(){A(!1)}),[]),pe=Object(a.useCallback)((function(){A(!0)}),[]),de=Object(a.useCallback)((function(){U.ctx.clearRect(0,0,u.current.width,u.current.height)}),[U]),me=Object(a.useCallback)((function(){var e,t;f.clearRect(0,0,null===(e=u.current)||void 0===e?void 0:e.width,null===(t=u.current)||void 0===t?void 0:t.height)}),[f]),fe=Object(a.useCallback)((function(){J&&J.getTracks().forEach((function(e){return e.stop()})),G(null),q(null),S(!1),oe(void 0)}),[J]),be=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a,r,o,c,i,l,u,p,d,m,f,b;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe(),x){e.next=6;break}return"Video not supported",console.error("Video not supported"),G("Video not supported"),e.abrupt("return");case 6:return a=(n="number"===typeof t)?{}:t||{},r=n?t:a.deviceIdx,e.prev=9,console.log("Finding Webcams..."),i={video:{width:{exact:a.width||1280},height:{exact:a.height||720}},audio:!1},void 0!==r&&(a.deviceId=null===(l=R[r])||void 0===l?void 0:l.deviceId),a.deviceId&&(i.video.deviceId={exact:a.deviceId}),e.next=16,navigator.mediaDevices.getUserMedia(i);case 16:u=e.sent,p=null===(o=u.getTracks()[0])||void 0===o||null===(c=o.getCapabilities())||void 0===c?void 0:c.deviceId,console.log("Found webcam!"),q(u),oe(p),G(!1),te(!1),$(!1),s.current.srcObject=u,e.next=37;break;case 27:return e.prev=27,e.t0=e.catch(9),"Error starting video.",console.error("Error starting video."),console.error(e.t0.message),(null===(d=e.t0.message)||void 0===d||null===(m=d.toLowerCase)||void 0===m||null===(f=m.call(d))||void 0===f||null===(b=f.includes)||void 0===b?void 0:b.call(f,"permission denied"))&&te(!0),q(null),S(!1),G("Error starting video."),e.abrupt("return");case 37:return e.next=39,Promise.all([new Promise((function(e){s.current.onloadedmetadata=function(){return e()}})),new Promise((function(e){s.current.onloadeddata=function(){return e()}}))]).then((function(){console.log("Webcam ready!"),S(!0),A(!1)}));case 39:return e.abrupt("return",e.sent);case 40:case"end":return e.stop()}}),e,null,[[9,27]])})));return function(t){return e.apply(this,arguments)}}(),[fe,s,R]),ge=Object(a.useCallback)(Object(E.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",be({deviceId:le}));case 1:case"end":return e.stop()}}),e)}))),[le,be]),ve=Object(a.useCallback)(Object(E.a)(k.a.mark((function e(){var t,n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=navigator)||void 0===t||null===(n=t.mediaDevices)||void 0===n?void 0:n.enumerateDevices){e.next=4;break}return console.error("Cannot get cameras."),e.abrupt("return",[]);case 4:return e.next=6,navigator.mediaDevices.enumerateDevices();case 6:return a=e.sent,r=a.filter((function(e){var t=e.kind,n=e.label;return"videoinput"===t&&!n.includes("CamTwist")})).map((function(e){var t,n=e.label.lastIndexOf(" (");return n>-1&&(t=e.label.slice(0,n)),t?{deviceId:e.deviceId,label:t}:e})),M(r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)}))),[]),he=Object(a.useCallback)((function(){return O((function(e){return!e}))}),[]),Oe=Object(a.useCallback)((function(e){window.localStorage.setItem("AutoStartId",e),se(e)}),[]),ye=Object(a.useCallback)((function(){window.localStorage.removeItem("AutoStartId"),se(null)}),[]),je=Object(a.useCallback)((function(e){de(),U.ctx.putImageData(e,0,0);var t=U.canvas.toDataURL("image/png");return de(),t}),[U,de]),ke=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(),(n=new Image).src=t,e.next=5,new Promise((function(e){n.onload=function(){U.ctx.drawImage(n,0,0),e()}}));case 5:return a=U.ctx.getImageData(0,0,u.current.width,u.current.height),de(),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[de,U]),Ee=Object(a.useCallback)((function(){de(),U.ctx.drawImage(s.current,0,0);var e=U.ctx.getImageData(0,0,u.current.width,u.current.height);return de(),e}),[de,U]);Object(a.useEffect)((function(){ve().then((function(e){var t,n=window.localStorage.getItem("AutoStartId"),a=!1,r=null===(t=e[0])||void 0===t?void 0:t.deviceId;(r=e.reduce((function(e,t,r){var o=t.deviceId,c=t.label;return o||(a=!0),o===n?o:e||(c.includes("Built-in")?o:null)}),null)||r)?Oe(r):a?($(!0),console.warn("Need video permissions!")):!r&&n&&ye()}))}),[]);var Ce=!!((null===(t=l.current)||void 0===t?void 0:t.requestFullscreen)||(null===(n=l.current)||void 0===n?void 0:n.mozRequestFullScreen)||(null===(o=l.current)||void 0===o?void 0:o.webkitRequestFullscreen)||(null===(c=l.current)||void 0===c?void 0:c.msRequestFullscreen)),we=Object(a.useState)(!1),xe=Object(d.a)(we,2),Se=xe[0],Ie=xe[1];Object(a.useEffect)((function(){var e=function(){var e=!!document.fullscreenElement;Ie(e)};return document.addEventListener("fullscreenchange",e),function(){return document.removeEventListener("fullscreenchange",e)}}),[]);var Te=Object(a.useCallback)((function(){Ce&&(l.current.requestFullscreen?l.current.requestFullscreen():l.current.mozRequestFullScreen?l.current.mozRequestFullScreen():l.current.webkitRequestFullscreen?l.current.webkitRequestFullscreen():l.current.msRequestFullscreen&&l.current.msRequestFullscreen())}),[Ce]),Re=Object(a.useCallback)((function(){Ce&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}),[Ce]),Me=Object(a.useCallback)((function(){Se?Re():Te()}),[Se,Te,Re]),Le=Object(a.useMemo)((function(){return{ctx:f,ready:w,flipX:h,start:ge,hidden:N,rootRef:l,cameras:R,setFlipX:O,videoRef:s,hasVideo:x,_setHidden:pe,canvasRef:u,stopVideo:fe,setVisible:ue,startVideo:be,videoError:Y,scratchpad:U,clearCanvas:me,toggleFlipX:he,videoStream:J,hasFullScreen:Ce,exitFullScreen:Re,clearScratchpad:de,currentDeviceId:re,enterFullScreen:Te,stop:fe,discoverCameras:ve,permissionNeeded:K,permissionDenied:ee,toggleFullScreen:Me,autoStartDeviceId:le,imageDataToDataUri:je,dataUriToImageData:ke,getVideoAsImageData:Ee,setAutoStartDeviceId:Oe,clearAutoStartDeviceId:ye,isFullScreen:Se}}),[f,w,h,ge,N,R,O,pe,fe,Se,ue,be,Y,U,he,me,J,Ce,Re,de,re,Te,ve,K,ee,Me,le,je,ke,Ee,Oe,ye]);return r.a.createElement(C.Provider,{value:Le},i)},I=n(50),T=n(6),R=n(32),M=n(2098),L=n(17),P=n(300),N=n.n(P),A=n(299),D=n.n(A),F=n(125),U=n.n(F),_=function(e){var t=e.color,n=void 0===t?"#fff":t,a=Object(L.c)({to:{opacity:1},from:{opacity:0},config:L.b.stiff});return r.a.createElement(L.a.div,{style:a},r.a.createElement("svg",{version:"1.1",id:"L7",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},r.a.createElement("path",{fill:n,d:"M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3 c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z"},r.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),r.a.createElement("path",{fill:n,d:"M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7 c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z"},r.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"-360 50 50",repeatCount:"indefinite"})),r.a.createElement("path",{fill:n,d:"M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5 L82,35.7z"},r.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"}))))},B=n(322),z=n(2151),Y=n(2153),G=n(2149),W=n(2136),V=n(293),J=n.n(V),q=n(26),H=n.n(q),X=n(2132),K=Object(y.a)((function(e){return{btn:{border:"2px solid ".concat(e.palette.secondary.main),background:e.palette.primary.main,color:e.palette.secondary.main,transition:"300ms all","&:hover":{border:"2px solid ".concat(e.palette.primary.main),background:e.palette.secondary.main,color:e.palette.primary.main}}}})),$=function(e){var t=e.Icon,n=e.className,a=Object(I.a)(e,["Icon","className"]),o=K();return r.a.createElement(X.a,Object.assign({size:"small",className:H()(o.btn,Object(T.a)({},n,n))},a),r.a.createElement(t,null))},Z=function(){},Q=Object(y.a)((function(e){return{root:function(e){return{position:"relative"}},arrowIcon:function(t){return{marginLeft:e.spacing(1)}},tooltip:function(e){return{position:"relative",margin:0}},arrow:function(e){return{position:"absolute",fontSize:6,"&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}},paper:{border:"1px solid #d3d4d5"},popper:function(t){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.95em",width:"2em",height:"1em","&::before":{borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent ".concat(e.palette.grey[700]," transparent")}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.95em",width:"2em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.grey[700]," transparent transparent transparent")}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.95em",height:"2em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent ".concat(e.palette.grey[700]," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.95em",height:"2em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent ".concat(e.palette.grey[700])}}}}}})),ee=function(e){var t,n=Q(e),o=Object(a.useMemo)(Math.random,[]),c=Object(a.useRef)(),i=Object(a.useState)(null),l=Object(d.a)(i,2),s=l[0],u=l[1],p=Object(a.useState)(null),m=Object(d.a)(p,2),f=m[0],b=m[1];Object(a.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]);var g=Object(a.useCallback)((function(e){c.current&&u(e.currentTarget)}),[]),v=Object(a.useCallback)((function(){c.current&&u(null)}),[]),h=Object(a.useCallback)(Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(e.onClose||Z)();case 2:!0!==t.sent&&v();case 4:case"end":return t.stop()}}),t)}))),[v,e.onClose]),O=Object(a.useCallback)((function(t){(e.onClickCheckbox||Z)(t.target.value,h)}),[e.onClickCheckbox,h]),y=Object(a.useCallback)((function(t){return function(){var n=Object(E.a)(k.a.mark((function n(a){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("checkbox"!==a.target.type){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,(e.onSelect||Z)(t);case 4:!0!==n.sent&&h();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),[h,e.onSelect]),j=!!s;return r.a.createElement("div",{className:n.root},r.a.createElement($,Object.assign({"aria-haspopup":"true",className:n.button,onClick:g,"aria-controls":"select-and-check-".concat(o),Icon:J.a},e.SelectProps)),r.a.createElement(B.a,Object.assign({keepMounted:!0,open:j,elevation:0,anchorEl:s,getContentAnchorEl:null,onClose:h,id:"select-and-check-".concat(o),classes:{paper:n.paper},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e.MenuProps),null===(t=e.options)||void 0===t?void 0:t.map((function(t,a){var o=t.key,c=t.value,i=t.text,l=t.selected,s=t.tooltipTitle,u=t.checked,p=t.checkboxValue,d=null;if("boolean"===typeof u){var m=r.a.createElement(G.a,{checked:u,onClick:O,value:void 0===p?c:p}),g=s||e.tooltipTitle;d=g?r.a.createElement(z.a,{classes:{tooltip:n.tooltip,popper:n.popper},PopperProps:{popperOptions:{modifiers:{arrow:{enabled:!!f,element:f}}}},title:r.a.createElement(r.a.Fragment,null,g,r.a.createElement("span",{className:n.arrow,ref:b})),enterDelay:void 0===e.tooltipEnterDelay?750:e.tooltipEnterDelay,leaveDelay:e.tooltipLeaveDelay||0,"aria-label":"checkbox",placement:e.tooltipPlacement||"top"},m):m}return r.a.createElement(Y.a,Object.assign({key:o||a,onClick:y(c),selected:l},e.MenuItemProps),d,r.a.createElement(W.a,{primary:i||(null===c||void 0===c?void 0:c.toString())}))}))))},te=Object(y.a)((function(e){return{root:function(e){return{}}}})),ne=function(e){var t,n=w(),o=te(Object(R.a)(Object(R.a)({},e),n)),c=Object(a.useMemo)((function(){var e={deviceId:null,label:null,none:!0};return n.currentDeviceId?(n.cameras.some((function(t){return t.deviceId===n.currentDeviceId&&(e=t,!0)})),e):e}),[n.cameras,n.currentDeviceId]),i=Object(a.useCallback)((function(e){n.currentDeviceId!==e&&n.startVideo({deviceId:e})}),[n]),l=Object(a.useCallback)((function(e){n.autoStartDeviceId===e?n.clearAutoStartDeviceId():(n.setAutoStartDeviceId(e),i(e))}),[n,i]);return r.a.createElement("div",{className:o.root},r.a.createElement(ee,{activeTitle:"Select Camera",title:(null===(t=n.cameras)||void 0===t?void 0:t.length)?c.label||"No Camera Selected":"No Cameras Detected",onSelect:i,onClickCheckbox:l,options:n.cameras.map((function(e){return{key:e.label,value:e.deviceId,text:e.label||"Unknown Device",selected:e.deviceId===n.currentDeviceId,checked:n.autoStartDeviceId===e.deviceId,tooltipTitle:n.autoStartDeviceId===e.deviceId?"Remove Default":"Set Default"}}))}))},ae=Object(y.a)((function(e){return{root:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"},paper:{padding:e.spacing(2),borderRadius:e.spacing(1),display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center","& h1":{marginBottom:e.spacing(2)},"& p":{marginBottom:e.spacing(1)}}}})),re=function(e){var t=ae(e),n=Object(L.c)({transform:"translate3d(0,0px,0)",from:{transform:"translate3d(0,-500px,0)"},config:L.b.slow}),a=Object(L.c)({to:{opacity:e.permissionDenied?1:0},config:L.b.wobbly});return r.a.createElement("div",{className:t.root},r.a.createElement(L.a.div,{style:n},r.a.createElement(M.a,{elevation:4,className:t.paper},r.a.createElement("div",{className:t.container},e.permissionDenied?r.a.createElement(L.a.div,{style:a},r.a.createElement(v.a,{component:"h1",variant:"h6"},"It looks like you have denied webcam access."),r.a.createElement(v.a,{component:"p"},"Please take a look at"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://support.google.com/chrome/answer/2693767"},"this article")," ","in order to enable access."),r.a.createElement(v.a,{component:"p"},"Once your webcam has been enabled, return here to play the game!")):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{component:"h1",variant:"h6"},"In order to play the game, you must grant permission to access your webcam."),r.a.createElement(v.a,{component:"p"},"Please select a camera."),r.a.createElement(ne,null))))))},oe=n(295),ce=n.n(oe),ie=n(296),le=n.n(ie),se=n(297),ue=n.n(se),pe=n(298),de=n.n(pe),me=Object(y.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"space-between","& > *":{marginLeft:e.spacing(1)}}}})),fe=function(e){var t=me(),n=e.controller,a=n.onHomeScreen,o=n.handleBack,c=n.toggleAudio,i=n.audioState,l=n.openHelp,s=Object(L.c)({to:{opacity:a?0:1},config:L.b.stiff});return r.a.createElement("div",{className:t.root},!a&&r.a.createElement(L.a.div,{style:s},r.a.createElement($,{onClick:o,Icon:ce.a})),!e.isFullScreen&&r.a.createElement(ne,null),r.a.createElement($,{onClick:c,Icon:i?le.a:ue.a}),!e.isFullScreen&&r.a.createElement($,{onClick:l,Icon:de.a}))},be=Object(y.a)((function(e){return{root:function(t){var n=t.isFullScreen;return Object(R.a)(Object(T.a)({maxWidth:1100,margin:"0 auto",position:"relative",height:"calc(0.5625 * (100vw - ".concat(e.spacing(4),"px))")},"@media(min-width: ".concat(1100,"px)"),{height:n?"100%":"calc(0.5625 * (".concat(1100,"px - ").concat(e.spacing(4),"px))")}),n?{display:"flex",alignItems:"center",justifyContent:"center"}:{})},container:function(t){var n=t.isFullScreen;return{width:"100%",position:"relative",paddingLeft:n?0:e.spacing(2),paddingRight:n?0:e.spacing(2)}},video:function(t){var n=t.flipX,a=t.isFullScreen;return Object(R.a)({width:"100%",height:"100%",borderRadius:a?0:e.spacing(1)},n?{"p-webkit-transform":"scaleX(- 1)",transform:"scaleX(-1)"}:{})},canvas:function(t){var n=t.isFullScreen;return{borderRadius:n?0:e.spacing(1),position:"absolute",top:0,left:0,width:"100%",paddingLeft:n?0:e.spacing(2),paddingRight:n?0:e.spacing(2)}},children:function(t){var n=t.isFullScreen;return{borderRadius:n?0:e.spacing(1),overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",bottom:5,zIndex:1,paddingLeft:n?0:e.spacing(2),paddingRight:n?0:e.spacing(2)}},fullScreen:{position:"absolute",bottom:e.spacing(1.5),right:function(t){var n=t.isFullScreen;return e.spacing(n?1.5:3)},zIndex:20},overlay:function(t){var n=t.overlayColor,a=t.isFullScreen;return{background:n,position:"absolute",top:0,bottom:5,left:a?0:e.spacing(2),right:a?0:e.spacing(2),borderRadius:a?0:e.spacing(1),zIndex:0}},loader:{position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",display:"flex",alignItems:"center",justifyContent:"center","& > div":{width:100,height:100}},paper:{top:0,bottom:5,zIndex:-1,position:"absolute",left:e.spacing(2),right:e.spacing(2),borderRadius:e.spacing(1)},buttons:{position:"absolute",top:e.spacing(1.5),right:e.spacing(1.5),zIndex:20},logo:{position:"absolute",top:e.spacing(1.5),left:e.spacing(1.5),zIndex:20,width:34}}})),ge=function(e){var t,n,a,o,c,i,l,s,u=e.overlay,p=Object(I.a)(e,["overlay"]),d=w(),m="string"!==typeof u?"rgba(255,255,255,0.5)":u,f=be(Object(R.a)(Object(R.a)(Object(R.a)({},p),d),{},{overlayColor:m})),b=Object(L.c)({to:{opacity:d.hidden?0:1},config:L.b.stiff});return r.a.createElement("div",{ref:d.rootRef,className:f.root},r.a.createElement(L.a.div,{style:b,className:f.container},r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{autoPlay:!0,ref:d.videoRef,className:f.video,width:null===(t=d.videoRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.videoWidth,height:null===(a=d.videoRef)||void 0===a||null===(o=a.current)||void 0===o?void 0:o.videoHeight}),r.a.createElement("canvas",{ref:d.canvasRef,className:f.canvas,width:null===(c=d.videoRef)||void 0===c||null===(i=c.current)||void 0===i?void 0:i.videoWidth,height:null===(l=d.videoRef)||void 0===l||null===(s=l.current)||void 0===s?void 0:s.videoHeight}),!d.hidden&&u&&r.a.createElement("div",{className:f.overlay}),p.children&&!d.hidden&&r.a.createElement("div",{className:f.children},p.children),d.hasFullScreen&&r.a.createElement($,{className:f.fullScreen,onClick:d.toggleFullScreen,Icon:d.isFullScreen?D.a:N.a})),!d.isFullScreen&&r.a.createElement(M.a,{elevation:4,className:f.paper}),d.isFullScreen&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:f.buttons},r.a.createElement(fe,{controller:p.headerController,isFullScreen:!0})),r.a.createElement("img",{className:f.logo,alt:"Carbon Copy Logo",src:U.a}))),d.permissionNeeded?r.a.createElement(re,{permissionDenied:d.permissionDenied}):d.hidden&&r.a.createElement("div",{className:f.loader},r.a.createElement("div",null,r.a.createElement(_,{color:"#000"}))))},ve=n(2152),he=n(2137),Oe=n(2138),ye=n(88),je=n.n(ye),ke=Object(y.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},ever:{fontWeight:"bold",fontStyle:"italic"}}})),Ee=Object(a.memo)((function(e){var t=e.open,n=e.handleClose,a=ke();return r.a.createElement(ve.a,{onClose:n,"aria-labelledby":"information",open:t,className:a.dialogRoot},r.a.createElement(he.a,{disableTypography:!0,id:"information"},r.a.createElement(v.a,{variant:"h5"},"Carbon Copy Fun!"),r.a.createElement(X.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(je.a,null))),r.a.createElement(Oe.a,{dividers:!0,className:a.dialogContent},r.a.createElement(v.a,{component:"h2",variant:"h6"},"Setup"),r.a.createElement(v.a,{gutterBottom:!0},"Place your webcam so that your entire body fits within the frame, and ensure there is enough space around you to move safely."),r.a.createElement(v.a,{gutterBottom:!0},"Be prepared to move side to side, forward and back, and even crouch."),r.a.createElement(v.a,{component:"h2",variant:"h6"},"Performance"),r.a.createElement(v.a,{gutterBottom:!0},"This game relies on state-of-the-art computer vision algorithms in order to detect the location of your body. This requires significant compute power. Don't be afraid if you hear your computer making noise."),r.a.createElement(v.a,{component:"h2",variant:"h6"},"Privacy"),r.a.createElement(v.a,{gutterBottom:!0},"Although this game requires your webcam to function, no personal images or data are collected by this application.")))})),Ce=Object(y.a)((function(e){return{root:{marginTop:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),width:"100%",maxWidth:1100,display:"flex",margin:"0 auto",alignItems:"center",justifyContent:"space-between"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},ever:{fontWeight:"bold",fontStyle:"italic"},title:{display:"flex",alignItems:"center","& > img":{width:34,marginRight:e.spacing(1)},"& > h1":{}}}})),we=Object(a.memo)((function(e){var t=Ce();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.title},r.a.createElement("img",{src:U.a,alt:"Carbon Copy Logo"}),r.a.createElement(v.a,{variant:"h4",component:"h1"},"Carbon Copy")),r.a.createElement(fe,{controller:e.controller})),r.a.createElement(Ee,{open:e.controller.helpOpen,handleClose:e.controller.closeHelp}))})),xe=Object(y.a)((function(e){return{heading:{marginLeft:e.spacing(2)}}})),Se=function(e){var t,n,a,o,c=xe(),i=w(),l=Ua(),s=Object(L.c)({to:{opacity:i.hidden?0:1},config:L.b.stiff}),u=i.hidden?"":(null===l||void 0===l||null===(t=l.screen)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.mode)||("play"===(null===l||void 0===l||null===(a=l.screen)||void 0===a||null===(o=a.state)||void 0===o?void 0:o.screen)?"Choose Mode":"Select Players");return r.a.createElement(v.a,{component:"h1",variant:"h6",className:c.heading},r.a.createElement(L.a.div,{style:s},u))},Ie="set_screen",Te="set_player_mode",Re="set_game_mode",Me="reverse_state",Le="reset_state",Pe={screen:{DEFAULT:"start",PLAY:"play"},players:{SINGLE_PLAYER:"Single Player",MULTIPLAYER:"Multi Player",DEFAULT:null},mode:(s={},Object(T.a)(s,"Single Player",{PRACTICE:"Practice",SURVIVAL:"Survival",TIME_ATTACK:"Time Attack"}),Object(T.a)(s,"Multi Player",{LOCAL:"Local",REMOTE:"P2P"}),Object(T.a)(s,"DEFAULT",null),s)},Ne=Object.entries(Pe).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(R.a)(Object(R.a)({},e),{},Object(T.a)({},a,"mode"!==a?Object.values(r).filter((function(e){return e})):Object.entries(r).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(R.a)(Object(R.a)({},e),{},Object(T.a)({},a,null===r?null:Object.values(r)))}),{})))}),{}),Ae={screen:Pe.screen.DEFAULT,mode:Pe.mode.DEFAULT,players:Pe.players.DEFAULT},De=(p={},Object(T.a)(p,Pe.screen.DEFAULT,Object(T.a)({},Pe.players.DEFAULT,null)),Object(T.a)(p,Pe.screen.PLAY,(u={},Object(T.a)(u,Pe.players.SINGLE_PLAYER,null),Object(T.a)(u,Pe.players.MULTIPLAYER,null),u)),p),Fe=function(e){var t,n=e.screenState,a=n.screen,o=n.players,c=(null===(t=De[a])||void 0===t?void 0:t[o])||Se;return r.a.createElement("header",null,r.a.createElement(c,null))},Ue=function(){return null},_e=n(2139),Be=n(301),ze=n.n(Be),Ye=function(e){var t=(e-25)/63;return Math.max(1,Math.min(10,Math.round(10*t)))},Ge=function(e,t){var n,a;e<50?(n=255,a=Math.round(5.1*e)):(a=255,n=Math.round(510-5.1*e));var r="#"+("000000"+(65536*n+256*a+0).toString(16)).slice(-6);if(t)try{var o=ze()(r),c=o.red,i=o.green,l=o.blue;return"rgba(".concat(c,", ").concat(i,", ").concat(l,", ").concat(t,")")}catch(s){return console.error(s,{score:e,alpha:t,hex:r}),"rgba(255, 255, 255, 0)"}return r},We=function(e,t){return Ge(function(e){return(e=Math.min(Math.max(e,0),10))/10*100}(e),t)},Ve=Object(_e.a)((function(e){return{masks:{padding:e.spacing(2),background:"rgba(255,255,255,0.5)"},masksHeader:{display:"flex",alignItems:"center",justifyContent:"space-between"},masksList:{display:"flex",flexFlow:"row wrap",justifyContent:"space-around"},maskContainer:{marginTop:e.spacing(2)},imgContainer:{width:200,position:"relative",border:"1px solid grey",padding:e.spacing(.5),borderRadius:e.spacing(1),"&:hover":{"& > div":{background:"rgba(255,0,0,0.65)"}}},img:{width:"100%",background:"rgba(0,0,0,0)"},removeMask:{top:0,left:0,bottom:0,width:"100%",display:"flex",alignItems:"center",position:"absolute",transition:"all 100ms",justifyContent:"center","&:hover":{"& > button":{display:"inherit"}}},iconBtn:{display:"none",color:"black",backgroundColor:"rgba(255,255,255,0.5)","&:hover":{backgroundColor:"rgba(255,255,255,0.75)"},"&:active, &:focused":{backgroundColor:"rgba(255,255,255,0.9)"}},actions:{"& > button":{marginRight:e.spacing(1),"& :last-of-type":{marginRight:0}}}}})),Je=function(e){var t=Ve(),n=e.masks,a=e.onClose,o=e.title,c=e.actions,i=e.actionButtons,l=e.getDataUri,s=e.getImageChild,u=e.getPaperProps,p=e.PaperProps,d=void 0===p?{}:p;return!!(null===n||void 0===n?void 0:n.length)&&r.a.createElement(M.a,{className:t.masks,elevation:4},r.a.createElement("div",{className:t.masksHeader},"string"===typeof o?r.a.createElement(v.a,{variant:"h6",component:"h3"},o):o||null,c||i?r.a.createElement("div",{className:t.actions},i.map((function(e){var t=e.Icon,n=e.onClick,a=e.key;return r.a.createElement(X.a,{key:a,size:"small",onClick:n},r.a.createElement(t,null))}))):a&&r.a.createElement("div",{className:t.actions},r.a.createElement(X.a,{size:"small",onClick:a},r.a.createElement(je.a,null)))),r.a.createElement("ul",{className:t.masksList},n.map((function(e,a){var o=l?l(e):e,c=u?u(e,a,n):{};return r.a.createElement("li",{key:o,className:t.maskContainer},r.a.createElement(M.a,Object.assign({elevation:4,className:t.imgContainer},d,c),s&&s(e,a),r.a.createElement("img",{src:o,className:t.img,alt:"mask #".concat(a)})))}))))},qe=Object(_e.a)((function(e){return{score:{textAlign:"right",paddingRight:e.spacing(1)}}})),He=function(e){var t=e.results,n=e.handleClose,o=e.label,c=Object(I.a)(e,["results","handleClose","label"]),i=qe(),l=Object(a.useMemo)((function(){var e=(t.reduce((function(e,t){return e+t.score}),0)/t.length).toFixed(1);return r.a.createElement(v.a,{variant:"h6",component:"h3"},o||r.a.createElement(r.a.Fragment,null,"Round Score: ",e))}),[t,o]),s=Object(a.useCallback)((function(e){return e.dataUri}),[]),u=Object(a.useCallback)((function(e){var t=e.score;return{style:{background:We(t,.4)}}}),[]),p=Object(a.useCallback)((function(e){var t=e.score;return r.a.createElement(v.a,{className:i.score},t)}),[i.score]);return r.a.createElement(Je,Object.assign({title:l,masks:t,onClose:n,getDataUri:s,getPaperProps:u,getImageChild:p},c))},Xe=n(135),Ke=n.n(Xe),$e=n(302),Ze=n.n($e),Qe=n(303),et=n.n(Qe),tt=Object(_e.a)((function(e){return{removeMask:{top:0,left:0,bottom:0,width:"100%",display:"flex",alignItems:"center",position:"absolute",transition:"all 100ms",justifyContent:"center","&:hover":{"& > button":{display:"inherit"}}},iconBtn:{display:"none",color:"black",backgroundColor:"rgba(255,255,255,0.5)","&:hover":{backgroundColor:"rgba(255,255,255,0.75)"},"&:active, &:focused":{backgroundColor:"rgba(255,255,255,0.9)"}}}})),nt=function(e){var t=tt(),n=e.captureMasks,o=e.handlePlay,c=Object(a.useMemo)((function(){return[{key:"play",Icon:Ke.a,onClick:o},{key:"download",Icon:Ze.a,onClick:n.downloadMasks},{key:"clear",Icon:je.a,onClick:n.removeAllMasks}]}),[n.downloadMasks,n.removeAllMasks,o]),i=Object(a.useCallback)((function(e){return e.binary}),[]),l=Object(a.useCallback)((function(e,a){return r.a.createElement("div",{className:t.removeMask},r.a.createElement(X.a,{name:a,className:t.iconBtn,onClick:n.removeMask},r.a.createElement(et.a,{fontSize:"large"})))}),[n.removeMask,t.removeMask,t.iconBtn]);return r.a.createElement(Je,{title:"Candidate Masks",getDataUri:i,masks:n.masks,actionButtons:c,getImageChild:l})},at=Object(_e.a)((function(e){return{score:{textAlign:"right",paddingRight:e.spacing(1)}}})),rt=function(e){var t=Ua(),n=at(),o=Object(a.useMemo)((function(){var e;return"time attack"===(null===t||void 0===t||null===(e=t.mode)||void 0===e?void 0:e.name)?{getPaperProps:function(e){var t=e.score;return{style:{background:We(Math.max(10.5-t,0),.4)}}},getImageChild:function(e){var t=e.score;return r.a.createElement(v.a,{className:n.score},t,"s")}}:{}}),[t,n.score]);if(!t.mode)return null;var c=t.mode,i=c.simpleGame,l=c.captureMasks,s=c.handlePlayCapturedMasks,u=c.resultsText,p="time attack"!==c.name||!t.loop.looping;return r.a.createElement(r.a.Fragment,null,p&&r.a.createElement(He,Object.assign({label:u,results:i.scores,handleClose:e.hideClose?null:i.clearScores},o)),l&&r.a.createElement(nt,{captureMasks:l,handlePlay:s}))},ot=Object(y.a)((function(e){return{root:function(e){var t=e.flip,n=e.height,a=void 0===n?10:n,r=e.background;return{height:a,background:void 0===r?"rgba(255,255,255,0)":r,width:"100%",borderRadius:50,transform:"scaleX(".concat(t?-1:1,")"),pWebkitTransform:"scaleX(".concat(t?-1:1,")")}},filler:function(e){var t=e.completed;return{height:"100%",textAlign:"left",background:e.color,width:"".concat(t,"%"),borderRadius:"inherit"}}}})),ct=function(e){var t=ot(e);return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.filler}))},it=n(28),lt=n(110),st=n.n(lt),ut=n(304),pt=n.n(ut),dt=(n(305),function(e){var t=cv.matFromImageData(e),n=t.rows,a=t.cols,r=20*(Math.random()-.5),o=new cv.Mat,c=new cv.Point(a/2,n/2),i=cv.getRotationMatrix2D(c,r,1);cv.warpAffine(t,o,i,t.size(),cv.INTER_NEAREST,cv.BORDER_CONSTANT,new cv.Scalar(0,0,0,0));var l=new cv.MatVector;cv.split(o,l);var s=-1,u=-1,p=-1,d=-1,m=new cv.Mat,f=new cv.Mat;cv.reduce(l.get(2),m,0,cv.REDUCE_MAX);for(var b=0;b<a;++b)if(-1===s&&m.data[b]>0){s=b;break}for(var g=a-1;g>=0;g--)if(-1===p&&m.data[g]>0){p=g;break}cv.reduce(l.get(2),m,1,cv.REDUCE_MAX);for(var v=0;v<n;++v)if(-1===u&&m.data[v]>0){u=v;break}for(var h=n-1;h>=0;h--)if(-1===d&&m.data[h]>0){d=h;break}var O=p-s+1,y=d-u+1,j=new cv.Rect(s,u,O,y),k=a/(m=o.roi(j)).cols,E=n/m.rows,C=Math.min(k,E),w=Math.min(.9+Math.random()*(1.1-.9),C),x=new cv.Size(m.cols*w,m.rows*w);cv.resize(m,f,x,0,0,cv.INTER_NEAREST);var S=f.cols,I=f.rows,T=(a-S)/2,R=T+(Math.random()-.5)*(2*Math.min(300,T)),M=new cv.Rect(R,n-I,S,I),L=new cv.Mat.zeros(n,a,o.type());f.copyTo(L.roi(M));var P=new ImageData(new Uint8ClampedArray(L.data),L.cols,L.rows);return o.delete(),t.delete(),m.delete(),f.delete(),L.delete(),P}),mt=function(e,t){for(var n=e.data,a=e.width,r=e.height,o=new Uint8ClampedArray(4*e.data.length),c=0;c<r*a;++c){var i=c%a,l=parseInt(c/a),s=n[c],u=t?a-i+a*l:c;o[4*u]=s?255:0,o[4*u+1]=s?255:0,o[4*u+2]=s?255:0,o[4*u+3]=s?255:0}var p=new ImageData(o,a,r),d=cv.matFromImageData(p),m=new cv.MatVector;cv.split(d,m);var f=new cv.Mat;cv.threshold(m.get(0),f,128,1,cv.THRESH_BINARY);var b=new cv.MatVector,g=new cv.Mat;cv.findContours(f,b,g,cv.RETR_CCOMP,cv.CHAIN_APPROX_SIMPLE);for(var v=cv.Mat.zeros(f.rows,f.cols,cv.CV_8UC1),h=0;h<b.size();++h)cv.contourArea(b.get(h))>1e4&&cv.drawContours(v,b,h,[1,1,1,1],-1,cv.LINE_8,g,100);return d.delete(),m.delete(),v},ft=function(e,t){var n=mt(e,t),a=new cv.MatVector,r=cv.Mat.zeros(n.rows,n.cols,cv.CV_8UC4);cv.split(r,a),a.get(2).setTo([255,0,0,0],n),a.get(3).setTo([128,0,0,0],n);var o=new cv.Mat,c=cv.Mat.ones(10,10,cv.CV_8U),i=new cv.Point(-1,-1);cv.dilate(n,o,c,i,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),cv.subtract(o,n,o),a.get(2).setTo([255,0,0,0],o),a.get(1).setTo([255,0,0,0],o),a.get(3).setTo([255,0,0,0],o),cv.merge(a,r);var l=new ImageData(new Uint8ClampedArray(r.data),r.cols,r.rows);return a.delete(),n.delete(),r.delete(),c.delete(),o.delete(),{overlayImageData:l,binaryImageData:l}},bt=function(e,t,n){for(var a=t.data,r=t.width,o=t.height,c=0,i=0,l=0;l<o*r;++l){var s=l%r,u=parseInt(l/r),p=n?r-s+r*u:l,d=a[l],m=!!e.data[4*p+2],f=d?1.3:1;m&&d&&(i+=f),(d||m)&&(c+=f)}return Math.round(i/(c+1e-7)*100)},gt=function(e,t,n){var a=mt(t,n),r=new cv.MatVector,o=cv.Mat.zeros(a.rows,a.cols,cv.CV_8UC4);cv.split(o,r),r.get(1).setTo([255,0,0,0],a),r.get(3).setTo([128,0,0,0],a);var c=new cv.Mat,i=cv.Mat.ones(10,10,cv.CV_8U),l=new cv.Point(-1,-1);cv.dilate(a,c,i,l,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),cv.subtract(c,a,c),r.get(1).setTo([255,0,0,0],c),r.get(3).setTo([255,0,0,0],c),cv.merge(r,o);var s=new ImageData(new Uint8ClampedArray(o.data),o.cols,o.rows),u=cv.matFromImageData(e),p=new cv.MatVector;cv.split(u,p);var d=new cv.Mat;cv.addWeighted(o,.5,u,.5,0,d);var m=new ImageData(new Uint8ClampedArray(d.data),d.cols,d.rows),f=bt(e,t,n);return r.delete(),a.delete(),o.delete(),i.delete(),c.delete(),d.delete(),{score:f,targetOverlay:m,segOverlay:s}},vt=function(e,t){if("undefined"!==typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,t);if("undefined"!==typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,t);var n=window.document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t,n.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(n),"function"===typeof n.click?n.click():(n.target="_blank",n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),URL.revokeObjectURL(n.href)},ht=function(e){return"set".concat(e,".zip")},Ot=function(e){var t=w(),n=Object(a.useState)(!1),r=Object(d.a)(n,2),o=r[0],c=r[1],i=Object(a.useCallback)(function(){var n=Object(E.a)(k.a.mark((function n(a){var r,o,i;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,st.a.loadAsync(a);case 2:return r=n.sent,n.next=5,Promise.all(r.filter((function(e){return e.endsWith(".png")})).map((function(e){var t=e.name;return r.file(t).async("base64")})));case 5:return o=n.sent,n.prev=6,n.next=9,Promise.all(o.map((function(e){return t.dataUriToImageData("data:image/png;base64,".concat(e))})));case 9:i=n.sent,e(i),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(6);case 15:c(!1);case 16:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e){return n.apply(this,arguments)}}(),[e,t]),l=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(d.a)(t,1),"application/zip"===(a=n[0]).type){e.next=4;break}return console.error("Expected a zip file but got",a.type),e.abrupt("return");case 4:return c(!0),e.next=7,i(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),s=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return c(!0),e.next=5,new st.a.external.Promise((function(e,n){pt.a.getBinaryContent(""+"/masks/".concat(t),(function(t,a){t?n(t):e(a)}))}));case 5:return n=e.sent,e.next=8,i(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),u=Object(a.useCallback)(Object(E.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(3*Math.random()),e.abrupt("return",s(ht(t+1)));case 2:case"end":return e.stop()}}),e)}))),[s]);return Object(a.useMemo)((function(){return{loading:o,handleZipInputChange:l,handleLoadRandomMaskSet:u,handleLoadPreparedMasks:s}}),[o,l,s,u])};var yt,jt,kt,Et,Ct,wt=function(e){if(!e)throw new Error("audioRef is required when calling useSfx");var t=Object(a.useCallback)((function(t){if(e.current)return function(e){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var t=new AudioContext,n=t.createBufferSource(),a=new Request(e);return fetch(a).then((function(e){return e.arrayBuffer()})).then((function(e){return t.decodeAudioData(e,(function(e){n.buffer=e,n.connect(t.destination)})),n.start(0)}))}(t)}),[e]);return{playSuccessSound:Object(a.useCallback)((function(){return t("/sounds/metallic_clank.ogg")}),[t]),playFailureSound:Object(a.useCallback)((function(){return t("/sounds/glass_shatter.ogg")}),[t]),playCameraSound:Object(a.useCallback)((function(){return t("/sounds/camera.ogg")}),[t])}},xt=window.speechSynthesis,St=function(){var e=Object(a.useRef)(!0),t=Object(a.useState)(!0),n=Object(d.a)(t,2),r=n[0],o=n[1],c=function(e){if(!e)throw new Error("audioRef is required when calling useSpeech");var t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(null),i=Object(d.a)(c,2),l=i[0],s=i[1];Object(a.useEffect)((function(){if(!r){var e=xt.getVoices();o(e),s(e[0])}}),[r]);var u=Object(a.useCallback)((function(t){if(e.current){var n=new SpeechSynthesisUtterance(t);n.voice=l,xt.speak(n)}}),[l,e]),p=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onEnd,a=t.onEach;n&&setTimeout(n,1e3*e),Array.from({length:e}).forEach((function(t,n){var r=e-n;setTimeout((function(){u(r),a&&a(r)}),1e3*n)}))}),[u]);return{say:u,countdown:p}}(e),i=wt(e);Object(a.useEffect)((function(){localStorage.getItem("__audio_muted__")&&o(!1)}),[]),Object(a.useEffect)((function(){r&&!e.current?(e.current=!0,localStorage.removeItem("__audio_muted__")):!r&&e.current&&(e.current=!1,localStorage.setItem("__audio_muted__","true"))}),[r]);var l=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]);return Object(a.useMemo)((function(){return{state:r,stateRef:e,handlers:{toggle:l,speech:c,sfx:i}}}),[r,l,c,i])},It=Object(a.createContext)(),Tt=function(){var e=Object(a.useContext)(It);if(void 0===e)throw new Error("useAudio must be used within a AudioProvider");return e},Rt=function(e){var t=e.children,n=St();return r.a.createElement(It.Provider,{value:n},t)},Mt=function(){var e=Object(a.useRef)([]),t=Object(a.useRef)(null),n=Object(a.useRef)(0),r=Object(a.useState)([]),o=Object(d.a)(r,2),c=o[0],i=o[1],l=Object(a.useCallback)((function(t){i(t),e.current="function"===typeof t?t(e.current):t}),[]),s=Object(a.useCallback)((function(){n.current=0,t.current=null}),[]),u=Object(a.useCallback)((function(){for(var t,n,a=c.slice(),r=a.length;0!==r;)n=Math.floor(Math.random()*r),t=a[r-=1],a[r]=a[n],a[n]=t;l(a),e.current=a}),[c,l]),p=Object(a.useCallback)((function(){n.current=0,t.current=null,u()}),[u]),m=Object(a.useCallback)((function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=e.current[n.current];if(!r)return t.current=null,n.current=0,null;if(a){var o=dt(r);return t.current=o,n.current++,o}return t.current=r,n.current++,r}),[]),f=Object(a.useCallback)((function(){return e.current.length}),[]),b=Object(a.useCallback)((function(){var e=c[Math.floor(Math.random()*c.length)],n=dt(e);return t.current=n,n}),[c]);return Object(a.useMemo)((function(){return{next:m,reset:s,random:b,maskRef:t,setMasks:l,maskIdxRef:n,getNumMasks:f,resetAndShuffle:p,hasMasks:!!c.length}}),[m,c,b,s,l,p,f])},Lt=Object(a.createContext)(),Pt=function(){var e=Object(a.useContext)(Lt);if(void 0===e)throw new Error("useCarbon must be used within a CarbonProvider");return e},Nt=function(e){var t=e.children,n=function(){var e=Tt().handlers.speech.say,t=Object(a.useRef)(),n=Object(a.useState)(!1),r=Object(d.a)(n,2),o=r[0],c=r[1];Object(a.useEffect)((function(){o&&!t.current?t.current=!0:!o&&t.current&&(t.current=!1)}),[o]);var i=Object(a.useCallback)((function(){c((function(t){return t||e("Carbon Activated!"),!t}))}),[e]);return window.__carbonate__=i,{carbonState:o,carbonRef:t}}();return r.a.createElement(Lt.Provider,{value:n},t)},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setLapTimeInfo,n=Object(a.useRef)(),r=w(),o=Pt(),c=o.carbonRef,i=Object(a.useRef)(0),l=Mt(),s=Object(a.useRef)(0),u=Object(a.useState)([]),p=Object(d.a)(u,2),m=p[0],f=p[1],b=Ot(l.setMasks),g=Wa(),v=Object(d.a)(g,2),h=v[0],O=v[1],y=Tt(),j=y.handlers,C=j.sfx,x=C.playSuccessSound,S=C.playFailureSound,I=j.speech.say,T=Object(a.useCallback)((function(){f([]),O([[],[]])}),[O]),R=Object(a.useCallback)((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){var o=Object(E.a)(k.a.mark((function o(c){return k.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c.time.first&&(l.next(),e||T(),c.useTimer({maxLaps:l.getNumMasks(),setLapTimeInfo:t,announceSeconds:!0,onLap:function(t){var o=t.predict,c=(t.time,t.stop),i=l.maskRef.current;if(!i)return c();n.current=o(r.videoRef.current).then(function(){var t=Object(E.a)(k.a.mark((function t(n){var o,c,s,u,p;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=gt(i,n,r.flipX),c=o.score,s=o.targetOverlay,u=r.imageDataToDataUri(s),void 0!==e?(p={score:Ye(c),dataUri:u},a(p),O((function(t){var n=Object(it.a)(t);return n[e]=[].concat(Object(it.a)(n[e]),[p]),n}))):f((function(e){return[].concat(Object(it.a)(e),[{score:Ye(c),dataUri:u}])})),r.clearCanvas(),l.next();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})),l.maskRef.current&&r.ctx.putImageData(l.maskRef.current,0,0),o.abrupt("return",(function(){n.current?n.current.then(c.webcam.clearCanvas):c.webcam.clearCanvas()}));case 3:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()}),[l,T,t,r,O]),M=Object(a.useCallback)((function(){return R()}),[R]),L=Object(a.useCallback)((function(e,t){return R(e,t)}),[R]),P=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.time.first&&(l.random(),T(),a.useTimer({maxLaps:9999999,lapDuration:1e4,setLapTimeInfo:t,announceSeconds:!0,onLap:function(e){var t=e.predict,o=(e.time,e.stop),i=l.maskRef.current;if(!i)return o();n.current=t(r.videoRef.current).then(function(){var e=Object(E.a)(k.a.mark((function e(t){var n,s,u,p,d,m;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=gt(i,t,r.flipX),s=n.score,u=n.targetOverlay,4,(p=Ye(s))<4?c.current?I("Missed it!"):S():c.current?I("Got it!"):x(),d=r.imageDataToDataUri(u),f((function(e){return[].concat(Object(it.a)(e),[{score:Ye(s),dataUri:d}])})),r.clearCanvas(),!(p<4)){e.next=12;break}return l.reset(),e.abrupt("return",o());case 12:m=a.timerRef.current.lapDuration/1e3,a.timerRef.current.lapDuration=1e3*(m-Math.log(m)/Math.log(50))-100,l.random();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})),l.maskRef.current&&r.ctx.putImageData(l.maskRef.current,0,0),e.abrupt("return",(function(){n.current?n.current.then(a.webcam.clearCanvas):a.webcam.clearCanvas()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,l,t,T,c,S,x,I]),N=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.time.first&&(10,l.resetAndShuffle(),l.next(!0),T(),i.current=0,s.current=0,a.useTimer({setLapTimeInfo:t,announceSeconds:!1,lapDuration:250,postLapDelay:0,onLap:function(e){var t=e.predict,a=e.time,o=e.stop,u=l.maskIdxRef.current,p=l.maskRef.current;if(!p||i.current>=10)return o();if(!(i.current>=u||i.current>=10)){var d=a.elapsed-s.current;if(d/1e3>=10){s.current=a.elapsed,c.current?I("Missed it!"):S();var m=r.imageDataToDataUri(p);f((function(e){return[].concat(Object(it.a)(e),[{score:10,dataUri:m}])})),r.clearCanvas(),i.current++,i.current<10&&l.next(!0)}n.current=t(r.videoRef.current).then(function(){var e=Object(E.a)(k.a.mark((function e(t){var n,o,m,b,g,v;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=bt(p,t,r.flipX),!(Ye(n)>5)){e.next=15;break}if(!(i.current>=u||i.current>=10)){e.next=5;break}return e.abrupt("return");case 5:c.current?I("Got it!"):x(),o=d/1e3,s.current=a.elapsed,m=Number(o.toFixed(1)),b=gt(p,t,r.flipX),g=b.targetOverlay,v=r.imageDataToDataUri(g),f((function(e){return[].concat(Object(it.a)(e),[{score:m,dataUri:v}])})),r.clearCanvas(),i.current++,i.current<10&&l.next(!0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.error)}}})),l.maskRef.current&&r.ctx.putImageData(l.maskRef.current,0,0),e.abrupt("return",(function(){n.current?n.current.then(a.webcam.clearCanvas):a.webcam.clearCanvas()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,l,T,t,S,x,c,I]);return Object(a.useMemo)((function(){return{zip:b,scores:m,multiplayerScores:h,handleLoop:M,handleMultiplayerLoop:L,handleSurvivalLoop:P,handleTimeAttackLoop:N,clearScores:T,reset:l.reset,ready:l.hasMasks,setMasks:l.setMasks}}),[b,m,h,M,L,P,N,T,l.hasMasks,l.reset,l.setMasks])},Dt=n(306),Ft=n.n(Dt),Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.maxMasks,n=void 0===t?0:t,r=e.setLapTimeInfo,o=Object(a.useRef)(),c=Object(a.useRef)([]),i=Object(a.useRef)(),l=Object(a.useState)([]),s=Object(d.a)(l,2),u=s[0],p=s[1],m=Pt(),f=m.carbonRef,b=Tt(),g=b.handlers,v=g.sfx.playCameraSound,h=g.speech.say,O=Object(a.useCallback)((function(e){"function"===typeof e?p((function(t){var n=e(t);return n!==t&&(c.current=n),n})):(c.current=e,p(e))}),[]),y=Object(a.useCallback)((function(){return c.current}),[]),j=Object(a.useCallback)((function(e){var t=e.currentTarget.name;O((function(e){return e.filter((function(e,n){return n!==+t}))}))}),[O]),C=Object(a.useCallback)((function(){O([])}),[O]),w=Object(a.useCallback)((function(){var e=new st.a,t=e.folder("masks");u.forEach((function(e,n){var a=e.overlay;t.file("mask-".concat(n,".png"),Ft.a.decode(a).dataBase64,{base64:!0})})),e.generateAsync({type:"blob"}).then((function(e){return vt(e,"masks.zip")}))}),[u]),x=Object(a.useCallback)((function(e){return function(){var t=Object(E.a)(k.a.mark((function t(a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.time.first&&(i.current=u.length,a.useTimer({announceSeconds:!0,lapDuration:3e3,postLapDelay:2500,maxLaps:n,setLapTimeInfo:r,onBeforeStartLap:function(){var e=Object(E.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.predict,t.webcam,t.time,t.stop,e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onLap:function(e){var t=e.predict,a=e.webcam,r=(e.time,e.stop);o.current=t(a.videoRef.current).then(function(){var e=Object(E.a)(k.a.mark((function e(t){var o,c,l,s,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=ft(t,a.flipX),c=o.overlayImageData,l=o.binaryImageData,f.current?h("Gotcha!"):v(),s=a.imageDataToDataUri(c),u=a.imageDataToDataUri(l),a.clearCanvas(),a.ctx.putImageData(c,0,0),O((function(e){return[].concat(Object(it.a)(e),[{overlay:s,binary:u}])})),e.next=9,new Promise((function(e){return setTimeout(e,1500)}));case 9:if(a.clearCanvas(),!(n&&++i.current>n)){e.next=12;break}return e.abrupt("return",r());case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onEnd:function(){var e=Object(E.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.time,n=t.webcam,t.predict,t.stop,e.next=3,new Promise((function(e){return setTimeout(e,2e3)}));case 3:n.clearCanvas();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),t.abrupt("return",(function(){o.current?o.current.then(a.webcam.clearCanvas).then((function(){e&&e()})):(a.webcam.clearCanvas(),e&&e())}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[u.length,n,r,O,v,h,f]);return Object(a.useMemo)((function(){return{masks:u,getMasks:y,handleLoop:x,removeMask:j,downloadMasks:w,removeAllMasks:C}}),[u,y,x,j,w,C])},_t={percent:0,percentRemaining:100,color:Ge(100),secondsRemaining:0},Bt=function(e){var t=Object(a.useState)(_t),n=Object(d.a)(t,2),r=n[0],o=n[1],c=At({setLapTimeInfo:o}),i=Ut({setLapTimeInfo:o}),l=Object(a.useMemo)((function(){var e,t;return"You survived ".concat((null===c||void 0===c||null===(e=c.scores)||void 0===e?void 0:e.length)-1," round").concat(2!==(null===c||void 0===c||null===(t=c.scores)||void 0===t?void 0:t.length)?"s":"",".")}),[c.scores]),s=Object(a.useRef)(!1);Object(a.useEffect)((function(){s.current||(s.current=!0,c.zip.handleLoadPreparedMasks("custom_mask.zip"))}),[c]);var u=Object(a.useCallback)(Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.looping?e.stop():e.start(c.handleSurvivalLoop);case 1:case"end":return t.stop()}}),t)}))),[e,c]),p=Object(a.useCallback)((function(){e.looping?e.stop():e.start(i.handleLoop())}),[e,i]);return Object(a.useMemo)((function(){return{name:"survival",loop:e,simpleGame:c,lapTimeInfo:r,resultsText:l,captureMasks:i,handleClickGame:u,handleClickCaptureMasks:p}}),[e,c,r,l,i,u,p])},zt=n(2140),Yt=n(308),Gt=n.n(Yt),Wt=n(307),Vt=n.n(Wt),Jt=Object(_e.a)((function(e){return{paper:{position:"relative",padding:e.spacing(1),paddingRight:e.spacing(5),paddingLeft:e.spacing(5),background:"rgba(255,255,255,0.95)",paddingBottom:e.spacing(2),marginTop:e.spacing(2),textAlign:"center","& h2":{marginBottom:e.spacing(4)},"& h3":{marginBottom:e.spacing(1)}},help:{maxHeight:200,marginTop:e.spacing(2),"& > div > p":{marginBottom:e.spacing(1)}},helpBtn:{position:"absolute",bottom:e.spacing(1),right:e.spacing(1),color:e.palette.secondary.main,background:e.palette.primary.main,transition:"300ms all","&:hover":{color:e.palette.primary.main,background:e.palette.secondary.main}},icon:{fontSize:50},marginTop:{marginTop:e.spacing(2)},helpContent:{fontWeight:600,fontFamily:Ja("Rajdhani"),fontSize:18}}})),qt=function(e){var t=e.headerContent,n=e.middleContent,o=e.footerContent,c=e.primaryText,i=e.secondaryText,l=e.helpContent,s=e.iconProps,u=(s=void 0===s?{}:s).loading,p=Object(I.a)(s,["loading"]),m=e.Icon,f=Object(a.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1],O=Object(a.useCallback)((function(){h((function(e){return!e}))}),[]),y=Jt(),j=Object(a.useMemo)((function(){return u?zt.a:{play:Ke.a,replay:Vt.a}[m]||m}),[m,u]);return r.a.createElement(M.a,{className:y.paper},t,c&&r.a.createElement(v.a,{component:"h3",variant:"h5"},c),n,i&&r.a.createElement(v.a,{component:"h4",variant:"h6",className:H()(y.subtext,Object(T.a)({},y.marginTop,n))},i),j&&r.a.createElement(X.a,Object.assign({size:"medium",disabled:u},p),r.a.createElement(j,{className:y.icon,color:p.color||"secondary"})),o,l&&r.a.createElement("div",{className:y.help},g&&r.a.createElement("div",{className:y.helpContent},Array.isArray(l)?r.a.createElement(r.a.Fragment,null,l.map((function(e){return r.a.createElement("p",{key:e},e)}))):l),r.a.createElement(X.a,{size:"small",className:y.helpBtn,onClick:O},r.a.createElement(Gt.a,null))))},Ht=Object(_e.a)((function(e){return{root:{padding:e.spacing(1),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overlay:{background:"rgba(255,255,255,0.5)"},options:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between",marginBottom:e.spacing(1),"& > *":{marginTop:e.spacing(2)}},optionsTop:{justifyContent:"center",alignItems:"center",flexDirection:"row",width:"100%",paddingLeft:e.spacing(10),paddingRight:e.spacing(10)},progress:{position:"absolute",top:e.spacing(1),left:e.spacing(8),right:e.spacing(8)}}})),Xt=function(e,t,n){return t===n.length-1?{style:{background:"rgba(255, 0, 0, 0.4)"}}:{}},Kt=function(e){var t=Ht(),n=_a(Bt),a=w(),o=n.loop,c=n.lapTimeInfo,i=n.handleClickGame;return r.a.createElement("div",{className:H()(t.root,Object(T.a)({},t.overlay,!o.looping))},r.a.createElement("div",{className:H()(t.options,Object(T.a)({},t.optionsTop,!!o.looping))},o.looping?r.a.createElement("div",{className:t.progress},r.a.createElement(ct,{color:c.color,completed:c.percentRemaining})):r.a.createElement(qt,{primaryText:"Survival",secondaryText:"Match the poses and survive as long as you can.",middleContent:a.isFullScreen&&r.a.createElement($t,null),Icon:"play",iconProps:{onClick:i,loading:!o.ready,color:"secondary"},helpContent:["You will have a limited number of time to match each pose.","Successfully match a pose by being within its lines when the timer runs out.","If your score is high enough, you will move on to the next round.","You will have less time each round.","How long can you survive?"]})))},$t=function(e){var t=Ua();if(!t.mode)return null;var n=t.mode,a=n.simpleGame,o=n.resultsText;return!t.loop.looping&&r.a.createElement(He,{label:o,getImageChild:null,results:a.scores,handleClose:a.clearScores,getPaperProps:Xt})},Zt=Object(_e.a)((function(e){return{root:function(t){return{minWidth:t.isFullScreen?"50%":"auto","& > div:first-of-type":{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}}})),Qt=function(e){var t=Ua(),n=Zt(e);if(!t.mode)return null;var a=t.mode,o=a.simpleGame,c=a.multiplayerResultsText;return!t.loop.looping&&r.a.createElement("div",{className:n.root},r.a.createElement(He,{label:c[0],results:o.multiplayerScores[0]}),r.a.createElement(He,{label:c[1],results:o.multiplayerScores[1]}))},en=Object(y.a)((function(e){return{root:{maxWidth:1100,margin:"0 auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),"& > div":{marginTop:e.spacing(2)}}}})),tn=Object(T.a)({},Pe.screen.PLAY,(kt={},Object(T.a)(kt,Pe.players.SINGLE_PLAYER,(yt={},Object(T.a)(yt,Pe.mode[Pe.players.SINGLE_PLAYER].PRACTICE,rt),Object(T.a)(yt,Pe.mode[Pe.players.SINGLE_PLAYER].SURVIVAL,$t),Object(T.a)(yt,Pe.mode[Pe.players.SINGLE_PLAYER].TIME_ATTACK,rt),yt)),Object(T.a)(kt,Pe.players.MULTIPLAYER,(jt={},Object(T.a)(jt,Pe.mode[Pe.players.MULTIPLAYER].LOCAL,Qt),Object(T.a)(jt,Pe.mode[Pe.players.MULTIPLAYER].REMOTE,Qt),jt)),kt)),nn=function(e){var t,n,a=en(),o=e.screen.state,c=o.screen,i=o.players,l=o.mode,s=(null===(t=tn[c])||void 0===t||null===(n=t[i])||void 0===n?void 0:n[l])||Ue;return r.a.createElement("div",{className:a.root},r.a.createElement(s,null))},an=n(311),rn=n.n(an),on=n(309),cn=n.n(on),ln=n(310),sn=n.n(ln),un=n(312),pn=n.n(un),dn=n(313),mn=n.n(dn),fn=n(2141),bn=Object(_e.a)((function(e){return{root:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between",marginBottom:e.spacing(1),"& > div > *":{marginTop:e.spacing(2)}},buttons:{display:"flex"},h:{flexDirection:"row"},v:{flexDirection:"column"},minWidth:{minWidth:150},label:{color:e.palette.primary.main,fontWeight:"bold",background:e.palette.secondary.main,padding:e.spacing(1),borderRadius:e.spacing(1),border:"".concat(e.spacing(.4),"px solid ").concat(e.palette.primary.main)},icon:{fontSize:100,border:"".concat(e.spacing(.4),"px solid ").concat(e.palette.secondary.main),borderRadius:"50%",padding:e.spacing(1),background:e.palette.primary.main,color:"black",transition:"300ms all","&:hover":{border:"".concat(e.spacing(.4),"px solid ").concat(e.palette.primary.main),background:e.palette.secondary.main,color:e.palette.primary.main}}}})),gn=function(e){return{transform:"translate3d(0,0px,0)",from:{transform:"translate3d(0,-".concat(e,"px,0)")},config:L.b.wobbly}},vn=function(e){var t,n=bn(),o=Object(L.d)(e.buttons.length,gn(e.offset||100)),c=Object(L.d)(1,gn((e.offset||100)+200)),i=Object(a.useState)(e.label),l=Object(d.a)(i,2),s=l[0],u=l[1];return r.a.createElement("div",{className:n.root},e.label&&c.map((function(e,t){return r.a.createElement(L.a.div,{style:e,key:t},r.a.createElement(v.a,{component:"h2",variant:"h5",className:n.label},s))})),r.a.createElement("div",{className:H()(n.buttons,(t={},Object(T.a)(t,n.h,"h"===e.layout),Object(T.a)(t,n.v,"h"!==e.layout),t))},o.map((function(t,a){var o=e.buttons[a],c=o.Component,i=o.visible,l=void 0===i||i,s=o.props,p=(s=void 0===s?{}:s).Icon,d=s.hover,m=Object(I.a)(s,["Icon","hover"]),f={};return d&&m.name&&e.label&&(f.onMouseEnter=function(){u(m.name)},f.onMouseLeave=function(){u(e.label)}),l?r.a.createElement(L.a.div,{key:m.key,style:t},c?r.a.createElement(c,m):p?r.a.createElement(X.a,Object.assign({size:"medium",variant:"contained",className:n.iconButton},f,m),r.a.createElement(p,{className:n.icon})):r.a.createElement(fn.a,Object.assign({color:"secondary",variant:"contained"},m,{className:n.minWidth}))):null}))))},hn=Object(y.a)((function(e){return{root:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","& button":{marginTop:e.spacing(2)}},gameMode:{textAlign:"center"},header:{marginTop:e.spacing(4),marginBottom:e.spacing(2)}}})),On=(Et={},Object(T.a)(Et,Pe.mode["Single Player"].SURVIVAL,cn.a),Object(T.a)(Et,Pe.mode["Single Player"].PRACTICE,sn.a),Object(T.a)(Et,Pe.mode["Single Player"].TIME_ATTACK,rn.a),Object(T.a)(Et,Pe.mode["Multi Player"].LOCAL,pn.a),Object(T.a)(Et,Pe.mode["Multi Player"].REMOTE,mn.a),Et),yn=function(e){var t=hn(),n=Pt().carbonState,o=Object(a.useCallback)((function(t){var n=t.currentTarget.name;e.screen.handlers.setGameMode(n)}),[e.screen.handlers]),c=Object(a.useMemo)((function(){var t;return null===(t=Ne.mode[e.screen.state.players])||void 0===t?void 0:t.map((function(e){return{props:{key:e,name:e,children:e,onClick:o,Icon:On[e],hover:!0}}})).filter((function(e){return!!n||"Practice"!==e.props.name}))}),[e.screen.state.players,o,n]);return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.gameMode},r.a.createElement(vn,{buttons:c,label:"Choose Mode",layout:"h"})))},jn=Object(y.a)((function(e){return{fileInput:{display:"none"}}})),kn=function(e){var t=e.onChange,n=e.multiple,o=e.children,c=e.filter,i=Object(I.a)(e,["onChange","multiple","children","filter"]),l=jn(),s=Object(a.useRef)(),u=Object(a.useCallback)((function(e){if(e){var a=!1===n,r=e.target?Array.from(e.target.files):e.files,o=c?r.filter(c):r;a&&o.length>1&&(o=o.slice(0,1)),t(o)}}),[t,n,c]),p=Object(a.useCallback)((function(){s.current.value=null}),[s]);return r.a.createElement(fn.a,Object.assign({component:"label"},i),o,r.a.createElement("input",{type:"file",ref:s,className:l.fileInput,onClick:p,onChange:u,multiple:!1!==n}))},En=Object(_e.a)((function(e){return{item:function(t){return{minWidth:t-e.spacing(4),textAlign:"center"}}}})),Cn=function(e){var t=Object(a.useState)(0),n=Object(d.a)(t,2),o=n[0],c=n[1],i=En(o),l=Object(a.useRef)();Object(a.useEffect)((function(){l.current&&c(l.current.clientWidth)}),[]);var s=r.a.useState(null),u=Object(d.a)(s,2),p=u[0],m=u[1],f=Object(a.useCallback)((function(e){m(e.currentTarget)}),[]),b=Object(a.useCallback)((function(){m(null)}),[]),g=Object(a.useCallback)((function(t){return function(){e.handleClick(t),b()}}),[e,b]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:l},r.a.createElement(fn.a,{fullWidth:!0,variant:"contained","aria-haspopup":"true",onClick:f,"aria-controls":"mask-menu",disabled:e.disabled},"Select Masks")),r.a.createElement(B.a,{id:"mask-menu",keepMounted:!0,anchorEl:p,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:b,open:Boolean(p),container:e.containerRef.current||null},Array.from({length:3}).map((function(e,t){return r.a.createElement(Y.a,{key:t,button:!0,onClick:g("set".concat(t+1,".zip"))},r.a.createElement("span",{className:i.item},"Game ",t+1))}))))},wn=function(e){var t=w(),n=Object(a.useState)(_t),r=Object(d.a)(n,2),o=r[0],c=r[1],i=At({setLapTimeInfo:c}),l=Ut({setLapTimeInfo:c}),s=Object(a.useState)(null),u=Object(d.a)(s,2),p=u[0],m=u[1];Object(a.useEffect)((function(){!e.looping&&p&&m(null)}),[e.looping,p]);var f=Object(a.useCallback)(Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.looping?(e.stop(),i.reset()):(e.start(i.handleLoop),m("play"));case 1:case"end":return t.stop()}}),t)}))),[e,i]),b=Object(a.useCallback)(Object(E.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.looping){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i.zip.handleLoadRandomMaskSet();case 4:f();case 5:case"end":return t.stop()}}),t)}))),[f,e.looping,i.zip]),g=Object(a.useCallback)((function(){e.looping?(e.stop(),i.reset()):(e.start(l.handleLoop()),m("capture"))}),[e,l,i]),v=Object(a.useCallback)(Object(E.a)(k.a.mark((function n(){var a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.looping){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Promise.all(l.masks.map((function(e){var n=e.overlay;return t.dataUriToImageData(n)})));case 4:a=n.sent,i.setMasks(a),f();case 7:case"end":return n.stop()}}),n)}))),[l.masks,i,t,f,e.looping]);return Object(a.useMemo)((function(){return{name:"practice",loopType:p,simpleGame:i,lapTimeInfo:o,captureMasks:l,handleClickGame:f,handleStartRandomGame:b,handlePlayCapturedMasks:v,handleClickCaptureMasks:g}}),[p,i,o,l,f,b,v,g])},xn=Object(_e.a)((function(e){return{root:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},scrollContainer:{position:"absolute",top:0,left:0,bottom:0,right:-17,overflowY:"scroll",padding:e.spacing(1),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overlay:{background:"rgba(255,255,255,0.5)"},rootTop:{justifyContent:"flex-start"},rootApart:{justifyContent:"space-between"},optionsTop:{justifyContent:"center",alignItems:"center",flexDirection:"row",width:"100%",paddingLeft:e.spacing(10),paddingRight:e.spacing(10)},captures:{width:"100%","& > div":{marginTop:e.spacing(1)}},progress:{position:"absolute",top:e.spacing(1),left:e.spacing(8),right:e.spacing(8)}}})),Sn=function(e){var t,n,o,c=xn(),i=Ua(),l=w(),s=Object(a.useRef)(),u=_a(wn),p=u.loopType,d=u.lapTimeInfo,m=u.simpleGame,f=u.captureMasks,b=u.handleClickGame,g=u.handleStartRandomGame,v=u.handleClickCaptureMasks,h=i.loop,O=d.color,y=Object(a.useMemo)((function(){return[{props:{key:"play/stop",onClick:b,disabled:!h.ready||!h.looping&&!m.ready,children:h.looping?"Stop":"Play"}},{props:{key:"playRandom",color:"secondary",onClick:g,disabled:!h.ready||h.looping,children:"Play Random"}},{props:{containerRef:s,key:"chooseMasks",disabled:!h.ready||h.looping,handleClick:m.zip.handleLoadPreparedMasks},Component:Cn,visible:!h.looping},{props:{key:"loadMasks",variant:"contained",onChange:m.zip.handleZipInputChange,disabled:!h.ready||h.looping||m.zip.loading,children:m.loading?"Loading...":"Load Masks"},Component:kn,visible:!h.looping},{props:{key:"captureMasks",onClick:v,disabled:!h.ready||h.looping,children:"Capture Masks",color:"default"},visible:!h.looping}]}),[h.ready,h.looping,b,m.ready,m.loading,g,m.zip.loading,v,m.zip.handleZipInputChange,m.zip.handleLoadPreparedMasks]);return r.a.createElement("div",{className:c.root},r.a.createElement("div",{className:H()(c.scrollContainer,(o={},Object(T.a)(o,c.overlay,!h.looping),Object(T.a)(o,c.rootTop,!!h.looping),Object(T.a)(o,c.rootApart,!(!(null===(t=m.scores)||void 0===t?void 0:t.length)&&!(null===(n=f.masks)||void 0===n?void 0:n.length))&&l.isFullScreen),o))},r.a.createElement("div",{className:H()(Object(T.a)({},c.optionsTop,!!h.looping)),ref:s},h.looping?r.a.createElement(vn,{offset:70,buttons:[{props:{key:"stop",onClick:b,children:"Stop"}}]}):r.a.createElement(vn,{buttons:y}),h.looping&&"play"===p&&r.a.createElement("div",{className:c.progress},r.a.createElement(ct,{color:O,completed:d.percentRemaining}))),l.isFullScreen&&!h.looping&&r.a.createElement(rt,null)))},In=n(314),Tn=n.n(In),Rn=n(315),Mn=n.n(Rn),Ln=Object(y.a)((function(e){return{root:{height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},transition:{textAlign:"center"},header:{marginBottom:e.spacing(2)}}})),Pn=(Ct={},Object(T.a)(Ct,Pe.players.SINGLE_PLAYER,Tn.a),Object(T.a)(Ct,Pe.players.MULTIPLAYER,Mn.a),Ct),Nn=function(e){var t=Ln(),n=Object(a.useCallback)((function(t){var n=t.currentTarget.name;e.setPlayerMode(n)}),[e]),o=Object(a.useMemo)((function(){return Ne.players.map((function(e){return{props:{key:e,name:e,children:e,onClick:n,Icon:Pn[e],hover:!0}}}))}),[n]);return r.a.createElement("div",{className:t.root},r.a.createElement(vn,{label:"Select Players",buttons:o,layout:"h"}))},An=function(e){var t=At(),n=Object(a.useRef)(!1),r=Object(a.useMemo)((function(){var n=t.scores.length&&!e.looping?t.scores.reduce((function(e,t){return e+t.score}),0):0,a=+n.toFixed(1)/t.scores.length;return"You finished Time Attack in ".concat(n.toFixed(1),"\n      seconds, averaging ").concat(a.toFixed(1)," seconds per pose!")}),[t,e]);Object(a.useEffect)((function(){n.current||(n.current=!0,t.zip.handleLoadPreparedMasks("custom_mask.zip"))}),[t]);var o=Object(a.useCallback)(Object(E.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.looping?(e.stop(),t.reset()):e.start(t.handleTimeAttackLoop);case 1:case"end":return n.stop()}}),n)}))),[e,t]);return Object(a.useMemo)((function(){return{name:"time attack",simpleGame:t,resultsText:r,handleClickGame:o}}),[t,r,o])},Dn=Object(_e.a)((function(e){return{root:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},scrollContainer:{position:"absolute",top:0,left:0,bottom:0,right:-17,overflowY:"scroll",padding:e.spacing(1),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overlay:{background:"rgba(255,255,255,0.5)"},optionsTop:{justifyContent:"center",alignItems:"center",flexDirection:"row",width:"100%",paddingLeft:e.spacing(10),paddingRight:e.spacing(10)},screen:{textAlign:"center","& > button":{marginTop:e.spacing(2)}}}})),Fn=function(e){var t,n,a=Dn(),o=Ua(),c=w(),i=_a(An),l=i.simpleGame,s=i.handleClickGame,u=o.loop;return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:H()(a.scrollContainer,Object(T.a)({},a.overlay,!u.looping))},r.a.createElement("div",{className:H()(a.screen,Object(T.a)({},a.optionsTop,!!u.looping))},!u.looping&&r.a.createElement(qt,{primaryText:"Time Attack",secondaryText:(null===(t=l.scores)||void 0===t?void 0:t.length)?"Play Again?":"Match the poses as quickly as you can.",Icon:(null===(n=l.scores)||void 0===n?void 0:n.length)?"replay":"play",iconProps:{color:"secondary",loading:!u.ready,onClick:s},middleContent:c.isFullScreen&&r.a.createElement(rt,{hideClose:!0}),helpContent:["Match each pose as quickly as possible","Your score is based on your total time, and the average time per pose.","Hop to it!"]}))))},Un=n(2142),_n=n(2143),Bn=n(2150),zn=n(2099),Yn=n(111),Gn=n.n(Yn),Wn=n(92),Vn=n.n(Wn),Jn=function(e){var t=w(),n=Object(a.useState)(_t),r=Object(d.a)(n,2),o=r[0],c=r[1],i=At({setLapTimeInfo:c}),l=Ut({maxMasks:5,setLapTimeInfo:c}),s=Object(a.useMemo)((function(){return i.multiplayerScores.map((function(t){return t.length&&!e.looping?t.reduce((function(e,t){return e+t.score}),0):0}))}),[i,e]),u=Object(a.useMemo)((function(){return s.map((function(e,t){return"Player ".concat(t?"Two":"One"," scored a total of ").concat(e," points")}))}),[s]),p=Object(a.useState)([[],[]]),m=Object(d.a)(p,2),f=m[0],b=m[1],g=Object(a.useState)(0),v=Object(d.a)(g,2),h=v[0],O=v[1],y=Object(a.useCallback)((function(){O((function(e){return e+1}))}),[]),j=Object(a.useCallback)((function(){e.looping?e.stop():(y(),e.start(l.handleLoop(Object(E.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(l.getMasks().map((function(e){var n=e.overlay;return t.dataUriToImageData(n)})));case 2:n=e.sent,0===h?b([n,[]]):1===h&&b((function(e){return[Object(it.a)(e[0]),n]})),l.removeAllMasks();case 5:case"end":return e.stop()}}),e)}))))))}),[e,l,h,t,y]),C=Object(a.useCallback)((function(){var t=2===h?1:0,n=2===h?0:1;i.setMasks(f[t]),e.start(i.handleMultiplayerLoop(n)),y()}),[e,f,i,h,y]),x=Object(a.useCallback)((function(){O(0),i.clearScores()}),[i]),S=Object(a.useCallback)((function(){e.looping||(h<2?j():h<4?C():x())}),[e.looping,C,j,x,h]);return Object(a.useMemo)((function(){return{name:Pe.mode["Multi Player"].LOCAL,simpleGame:i,handleClick:S,lapTimeInfo:o,captureMasks:l,setupProgress:h,multiplayerResultsText:u,multiplayerScoreSums:s,NUM_MASKS:5}}),[i,o,l,h,S,u,s])},qn=Object(_e.a)((function(e){return{root:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},scrollContainer:{position:"absolute",top:0,left:0,bottom:0,right:-17,overflowY:"scroll",padding:e.spacing(1),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overlay:{background:"rgba(255,255,255,0.5)"},rootTop:{justifyContent:"flex-start"},rootApart:{justifyContent:"space-between"},optionsTop:{justifyContent:"center",alignItems:"center",flexDirection:"row",width:"100%",paddingLeft:e.spacing(10),paddingRight:e.spacing(10)},progress:{position:"absolute",top:e.spacing(1),left:e.spacing(8),right:e.spacing(8)},container:{textAlign:"center"},stepper:{background:"transparent",marginBottom:e.spacing(2)}}})),Hn=Object(_e.a)((function(e){return{root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient( 136deg, ".concat(e.palette.secondary.light," 0%, ").concat(e.palette.secondary.main," 50%, ").concat(e.palette.secondary.dark," 100%)"),boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient( 136deg, ".concat(e.palette.secondary.light," 0%, ").concat(e.palette.secondary.main," 50%, ").concat(e.palette.secondary.dark," 100%)")}}}));function Xn(e){var t,n=Hn(),a=e.active,o=e.completed,c={1:r.a.createElement(Gn.a,null),2:r.a.createElement(Gn.a,null),3:r.a.createElement(Vn.a,null),4:r.a.createElement(Vn.a,null)};return r.a.createElement("div",{className:H()(n.root,(t={},Object(T.a)(t,n.active,a),Object(T.a)(t,n.completed,o),t))},c[String(e.icon)])}var Kn=["Player One Capture","Player Two Capture","Player One Play","Player Two Play"],$n=function(e){var t,n=Ua(),o=_a(Jn),c=w(),i=Object(d.a)([["One","Two"],["Two","One"]][o.setupProgress%2],2),l=i[0],s=i[1],u=o.setupProgress<2?"Player ".concat(l,", get ready to capture ").concat(o.NUM_MASKS," poses."):"Player ".concat(l,", get ready to play!"),p=o.setupProgress<2?"Player ".concat(s,", please leave the room."):"Good luck!",m=o.setupProgress>=4,f=Object(a.useMemo)((function(){return m?o.multiplayerScoreSums[0]>o.multiplayerScoreSums[1]?"Player One wins!":o.multiplayerScoreSums[0]<o.multiplayerScoreSums[1]?"Player Two wins!":"It's a tie!":""}),[o.multiplayerScoreSums,m]),b=qn(m);return r.a.createElement("div",{className:b.root},r.a.createElement("div",{className:H()(b.scrollContainer,(t={},Object(T.a)(t,b.overlay,!n.loop.looping),Object(T.a)(t,b.rootTop,!1),Object(T.a)(t,b.rootApart,!1),t))},r.a.createElement("div",{className:H()(b.container,Object(T.a)({},b.optionsTop,!!n.loop.looping))},n.loop.looping?r.a.createElement("div",{className:b.progress},r.a.createElement(ct,{color:o.lapTimeInfo.color,completed:o.lapTimeInfo.percentRemaining})):r.a.createElement(qt,{headerContent:!m&&r.a.createElement(Un.a,{className:b.stepper,alternativeLabel:!0,activeStep:o.setupProgress,connector:r.a.createElement(zn.a,null)},Kn.map((function(e){return r.a.createElement(_n.a,{key:e},r.a.createElement(Bn.a,{StepIconComponent:Xn},e))}))),primaryText:m?f:u,middleContent:o.setupProgress>=3&&c.isFullScreen&&!n.loop.looping&&r.a.createElement(Qt,{isFullScreen:c.isFullScreen}),secondaryText:m?"Play again?":p,iconProps:{color:"secondary",loading:!n.loop.ready,onClick:o.handleClick},Icon:m?"replay":"play",helpContent:!m&&["In this game mode two players will compete head to head.","Each player will take turns capturing funky poses for their opponent to try and match.","The player who does the best job matching their opponent's poses will win."]}))))},Zn=n(319),Qn=n.n(Zn),ea=n(316),ta=n(317),na=n.n(ta),aa=n(318),ra=n.n(aa),oa=function(e){return"CARBON_COPY_"+e},ca=function(e){return null===e||void 0===e?void 0:e.replace("CARBON_COPY_","")},ia=function(e){return e.replace(/[^a-zA-Z0-9]/g,"")},la=function(){var e=Object(a.useRef)(),t=w(),n=Object(a.useRef)(!1),r=Object(a.useState)(null),o=Object(d.a)(r,2),c=o[0],i=o[1],l=Object(a.useState)(null),s=Object(d.a)(l,2),u=s[0],p=s[1],m=Object(a.useState)([[],[]]),f=Object(d.a)(m,2),b=f[0],g=f[1],v=Object(a.useState)(null),h=Object(d.a)(v,2),O=h[0],y=h[1],j=Object(a.useState)(!1),C=Object(d.a)(j,2),x=C[0],S=C[1],I=Object(a.useState)(null),T=Object(d.a)(I,2),R=T[0],M=T[1],L=Object(a.useState)(!1),P=Object(d.a)(L,2),N=P[0],A=P[1],D=Wa(),F=Object(d.a)(D,2)[1],U=Object(a.useState)(!1),_=Object(d.a)(U,2),B=_[0],z=_[1],Y=Object(a.useState)(ia(ra.a.internet.userName())),G=Object(d.a)(Y,2),W=G[0],V=G[1],J=function(){return n.current},q=function(){return g([[],[]])},H=function(){q(),z(!0)},X=function(){y(null),S(!1),A(!1),n.current=!1,M(null),q(),H()},K=function(e){y(e),A(!0),e.on("open",(function(e){console.log("CONN: open",e),S(!0),A(!1)})),e.on("data",function(){var e=Object(E.a)(k.a.mark((function e(a){var r,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a.eventName,e.next="initialMasks"===e.t0?3:"results"===e.t0?8:"restart"===e.t0?11:13;break;case 3:return e.next=5,Promise.all(a.maskDataURIs.map(t.dataUriToImageData));case 5:return r=e.sent,g((function(e){return[n.current?e[0]:r,n.current?r:e[1]]})),e.abrupt("break",15);case 8:return o=J()?1:0,F((function(e){var t=Object(it.a)(e);return t[o]=[].concat(Object(it.a)(t[o]),[a.results]),t})),e.abrupt("break",15);case 11:return H(),e.abrupt("break",15);case 13:return console.log("Unknown event:",a),e.abrupt("break",15);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("disconnected",(function(e){console.log("CONN: Got disconnected",e)})),e.on("close",(function(e){console.log("CONN: close",e),X()})),e.on("connection",(function(e){console.log("CONN connection:",e)})),e.on("error",(function(e){console.log("CONN: error",e)}))},$=function(t,n){var a=new na.a(oa(t||W));p(a),a.on("disconnected",(function(e){console.log("PEER: disconnected",e)})),a.on("close",(function(e){console.log("PEER: close",e)})),a.on("open",(function(t){console.log("PEER: open",t),e.current=!1,n&&n(),i(t)})),a.on("connection",(function(e){console.log("PEER: connection",e),M(ca(e.peer)),K(e)})),a.on("error",(function(e){console.log("PEER: error",e),(e.message.includes("Could not connect to peer")||e.message.includes("Called in wrong state"))&&X()}))},Z=function(e){O.send(e)};return{init:$,connect:function(t){if(e.current)console.log("Connecting too soon after name change. Hold your horses cowboy.");else{console.log("Connecting to peer:",t);var a=u.connect(oa(t),{serialization:"json"});M(t),n.current=!0,K(a)}},send:Z,peer:u,connection:O,myName:W,updateName:function(t,n){if(t&&!(t.length<5)){e.current=!0,u&&u.destroy();var a=ia(t);V(a),$(a,n)}},peerId:ca(c),isConnecting:N,isConnected:x,isPlayerOne:J,opponentName:R,masks:b,setMasks:g,sendResults:function(e){return Z({eventName:"results",results:e})},resetGame:function(){q(),Z({eventName:"restart"})},opponentClickedReset:B,setOpponentClickedReset:z}},sa=Object(a.createContext)(),ua=function(){var e=Object(a.useContext)(sa);if(void 0===e)throw new Error("usePeerJS must be used within a PeerJSProvider");return e},pa=function(e){var t=e.children,n=la();return r.a.createElement(sa.Provider,{value:n},t)},da=function(e,t){var n=w(),r=ua(),o=Object(a.useState)(_t),c=Object(d.a)(o,2),i=c[0],l=c[1],s=At({setLapTimeInfo:l,multiplayerScoreThing:t}),u=Ut({maxMasks:5,setLapTimeInfo:l});Object(a.useEffect)((function(){r.peer||r.init()}),[r]);var p=Object(a.useMemo)((function(){return s.multiplayerScores.map((function(t){return t.length&&!e.looping?t.reduce((function(e,t){return e+t.score}),0):0}))}),[s,e]),m=Object(a.useMemo)((function(){return p.map((function(e,t){var n=Number(!r.isPlayerOne())===t?"You":r.opponentName;return"".concat(n," scored a total of ").concat(e," points")}))}),[p,r]),f=Object(a.useState)(0),b=Object(d.a)(f,2),g=b[0],v=b[1],h=Object(a.useCallback)((function(){v((function(e){return e+1}))}),[]),O=Object(a.useCallback)((function(){e.looping?e.stop():(h(),e.start(u.handleLoop(Object(E.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.getMasks().map((function(e){return e.overlay})),0!==g){e.next=9;break}return r.send({eventName:"initialMasks",maskDataURIs:t}),e.next=5,Promise.all(t.map((function(e){return n.dataUriToImageData(e)})));case 5:a=e.sent,r.setMasks((function(e){return[r.isPlayerOne()?a:e[0],r.isPlayerOne()?e[1]:a]})),e.next=10;break;case 9:console.error("Called handleCapture without setupProgress === 0");case 10:u.removeAllMasks();case 11:case"end":return e.stop()}}),e)}))))))}),[e,u,g,n,r,h]),y=Object(a.useCallback)((function(){1===g?r.isPlayerOne()?(s.setMasks(r.masks[1]),e.start(s.handleMultiplayerLoop(0,r.sendResults)),h()):h():2===g&&(r.isPlayerOne()||(s.setMasks(r.masks[0]),e.start(s.handleMultiplayerLoop(1,r.sendResults))),h())}),[e,r,s,g,h]),j=Object(a.useCallback)((function(){v(0),s.clearScores(),r.resetGame()}),[s,r]),C=Object(a.useCallback)((function(){v(0),s.clearScores(),r.setOpponentClickedReset(!1)}),[r,s]);Object(a.useEffect)((function(){r.opponentClickedReset&&C()}),[r,C]);var x=Object(a.useCallback)((function(){e.looping||(0===g?O():g<3?y():j())}),[e.looping,y,O,j,g]);return Object(a.useMemo)((function(){return{peerJs:r,name:Pe.mode["Multi Player"].REMOTE,simpleGame:s,handleClick:x,lapTimeInfo:i,captureMasks:u,setupProgress:g,multiplayerResultsText:m,multiplayerScoreSums:p,incrementProgress:h,NUM_MASKS:5}}),[r,s,i,u,g,x,m,p,h])},ma=n(2147),fa=Object(y.a)((function(e){return{root:{display:"flex",justifyContent:"space-between"},text:{flexGrow:1}}})),ba=function(e){var t=fa(),n=ua(),o=Object(a.useState)(""),c=Object(d.a)(o,2),i=c[0],l=c[1];return r.a.createElement("div",{className:t.root},r.a.createElement(ma.a,{value:i,className:t.text,disabled:!n.peer||!!n.connection,onChange:function(e){return l(ia(e.target.value))},placeholder:"Enter your friend's Peer ID"}),r.a.createElement(fn.a,{disabled:e.disableConnect||!n.peer||i.length<5||!!n.connection,variant:"outlined",onClick:function(){return n.connect(i)}},"Connect"))},ga=Object(y.a)((function(e){return{root:{display:"flex",alignItems:"center"},span:{fontWeight:"bold",marginRight:e.spacing(1)}}})),va=function(e){var t=ga(e),n=Object(a.useRef)(),o=Object(a.useState)(""),c=Object(d.a)(o,2),i=c[0],l=c[1],s=Object(a.useRef)(),u=Object(a.useRef)();Object(a.useEffect)((function(){e.name&&!n.current&&(n.current=e.name,l(e.name))}),[e.name]);var p=function(t){return function(){var n=t||i;clearTimeout(u.current),n!==e.name&&(i.length>5?e.updateName(n,(function(){return e.setDisableConnect(!1)})):(l(e.name),e.setDisableConnect(!1)))}};return r.a.createElement("div",{className:t.root},r.a.createElement("span",{className:t.span},"Your name is:"),r.a.createElement(ma.a,{ref:s,inputProps:{spellCheck:"false"},value:i,onBlur:p(),onChange:function(t){var n=t.target.value,a=ia(n);l(a),clearTimeout(u.current),e.setDisableConnect(!0),u.current=setTimeout((function(){p(a)()}),1500)}}))},ha=Object(_e.a)((function(e){return{root:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},scrollContainer:{position:"absolute",top:0,left:0,bottom:0,right:-17,overflowY:"scroll",padding:e.spacing(1),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overlay:{background:"rgba(255,255,255,0.5)"},rootTop:{justifyContent:"flex-start"},rootApart:{justifyContent:"space-between"},optionsTop:{justifyContent:"center",alignItems:"center",flexDirection:"row",width:"100%",paddingLeft:e.spacing(10),paddingRight:e.spacing(10)},progress:{position:"absolute",top:e.spacing(1),left:e.spacing(8),right:e.spacing(8)},container:{textAlign:"center"},stepper:{background:"transparent",marginBottom:e.spacing(2)},idContainer:{display:"flex",justifyContent:"center",alignItems:"center"},bold:{fontWeight:"bold",fontSize:18}}})),Oa=Object(_e.a)((function(e){return{root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient( 136deg, ".concat(e.palette.secondary.light," 0%, ").concat(e.palette.secondary.main," 50%, ").concat(e.palette.secondary.dark," 100%)"),boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient( 136deg, ".concat(e.palette.secondary.light," 0%, ").concat(e.palette.secondary.main," 50%, ").concat(e.palette.secondary.dark," 100%)")}}}));function ya(e){var t,n=Oa(),a=e.active,o=e.completed,c={1:r.a.createElement(Gn.a,null),2:r.a.createElement(Vn.a,null),3:r.a.createElement(Vn.a,null)};return r.a.createElement("div",{className:H()(n.root,(t={},Object(T.a)(t,n.active,a),Object(T.a)(t,n.completed,o),t))},c[String(e.icon)])}var ja,ka,Ea,Ca=function(e){var t,n=Ua(),o=w(),c=_a(da),i=Wa(),l=Object(d.a)(i,1)[0],s=Object(a.useState)(!1),u=Object(d.a)(s,2),p=u[0],m=u[1],f=["Capture",c.peerJs.isPlayerOne()?"You Play":"They Play",c.peerJs.isPlayerOne()?"They Play":"You Play"],b=c.peerJs.isPlayerOne()?1:0,g=5===c.peerJs.masks[b].length,v=1===c.setupProgress&&c.peerJs.isPlayerOne()||2===c.setupProgress&&!c.peerJs.isPlayerOne();Object(a.useEffect)((function(){!v&&5===l[b].length&&c.setupProgress<3&&c.incrementProgress()}),[v,l,b,c]);var h=Boolean(l[Number(c.peerJs.isPlayerOne())].length),O=r.a.createElement("div",null,r.a.createElement("p",null,"Please wait..."),r.a.createElement("br",null),r.a.createElement("p",null,"It's ",c.peerJs.opponentName,"'s turn to play."),r.a.createElement("br",null)),y=r.a.createElement("div",null,r.a.createElement("p",null,c.peerJs.opponentName," has started playing!"),r.a.createElement("br",null)),j=r.a.createElement("div",null,r.a.createElement("p",null,"It's your turn."),r.a.createElement("br",null),r.a.createElement("p",null,"Press play to start!")),k=r.a.createElement("div",null,r.a.createElement("p",null,"Waiting for ",c.peerJs.opponentName,"'s masks."),r.a.createElement("p",null,"One moment please...")),E=["".concat(c.peerJs.myName,", click play to capture ").concat(c.NUM_MASKS," poses."),c.peerJs.isPlayerOne()?g?j:k:h?y:O,c.peerJs.isPlayerOne()?h?y:O:g?j:k][c.setupProgress],C=c.setupProgress>=3,x=Object(a.useMemo)((function(){return C?c.multiplayerScoreSums[0]>c.multiplayerScoreSums[1]?c.peerJs.isPlayerOne()?"You won!":"You lost.":c.multiplayerScoreSums[0]<c.multiplayerScoreSums[1]?c.peerJs.isPlayerOne()?"You lost.":"You won!":"It's a tie!":""}),[c.multiplayerScoreSums,c.peerJs,C]),S=ha(C),I=r.a.createElement(qt,{headerContent:!C&&r.a.createElement(Un.a,{className:S.stepper,alternativeLabel:!0,activeStep:c.setupProgress,connector:r.a.createElement(zn.a,null)},f.map((function(e){return r.a.createElement(_n.a,{key:e},r.a.createElement(Bn.a,{StepIconComponent:ya},e))}))),primaryText:C?x:E,middleContent:c.setupProgress>=2&&o.isFullScreen&&!n.loop.looping&&r.a.createElement(Qt,{isFullScreen:o.isFullScreen}),secondaryText:C?"Play again?":"",iconProps:{color:"secondary",loading:!n.loop.ready,onClick:c.handleClick},Icon:0===c.setupProgress||3===c.setupProgress||v&&g?C?"replay":"play":null,helpContent:!C&&["In this game mode two players will compete head to head.","Each player will take turns capturing funky poses for their opponent to try and match.","The player who does the best job matching their opponent's poses will win."]}),R=r.a.createElement(qt,{headerContent:null,primaryText:"Connect to a friend to play remotely",middleContent:r.a.createElement("div",{className:S.idContainer},r.a.createElement(va,{name:c.peerJs.peerId,updateName:c.peerJs.updateName,setDisableConnect:m}),r.a.createElement(ea.CopyToClipboard,{text:c.peerJs.myName},r.a.createElement(X.a,{"aria-label":"copy",color:"secondary"},r.a.createElement(Qn.a,null)))),secondaryText:r.a.createElement(ba,{disableConnect:p}),iconProps:{color:"secondary",disabled:!0,onClick:c.handleClick}});return r.a.createElement("div",{className:S.root},r.a.createElement("div",{className:H()(S.scrollContainer,(t={},Object(T.a)(t,S.overlay,!n.loop.looping),Object(T.a)(t,S.rootTop,!1),Object(T.a)(t,S.rootApart,!1),t))},r.a.createElement("div",{className:H()(S.container,Object(T.a)({},S.optionsTop,!!n.loop.looping))},n.loop.looping?r.a.createElement("div",{className:S.progress},r.a.createElement(ct,{color:c.lapTimeInfo.color,completed:c.lapTimeInfo.percentRemaining})):c.peerJs.isConnected?I:R)))},wa=Object(T.a)({},Pe.screen.PLAY,(Ea={},Object(T.a)(Ea,Pe.players.SINGLE_PLAYER,(ja={},Object(T.a)(ja,Pe.mode[Pe.players.SINGLE_PLAYER].PRACTICE,Sn),Object(T.a)(ja,Pe.mode[Pe.players.SINGLE_PLAYER].SURVIVAL,Kt),Object(T.a)(ja,Pe.mode[Pe.players.SINGLE_PLAYER].TIME_ATTACK,Fn),ja)),Object(T.a)(Ea,Pe.players.MULTIPLAYER,(ka={},Object(T.a)(ka,Pe.mode[Pe.players.MULTIPLAYER].LOCAL,$n),Object(T.a)(ka,Pe.mode[Pe.players.MULTIPLAYER].REMOTE,Ca),ka)),Ea)),xa=function(e){var t,n,a=e.screen.state,o=a.screen,c=a.mode,i=a.players;if(o===Pe.screen.DEFAULT)return r.a.createElement(Nn,{setPlayerMode:e.screen.handlers.setPlayerMode});if(c===Pe.mode.DEFAULT)return r.a.createElement(yn,{screen:e.screen});var l=(null===(t=wa[o])||void 0===t||null===(n=t[i])||void 0===n?void 0:n[c])||Ue;return r.a.createElement(l,null)},Sa=n(320),Ia=n.n(Sa)()(),Ta=Object(a.createContext)(),Ra=function(e){var t=e.children,n=function(){var e=w(),t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useState)(!1),o=Object(d.a)(r,2),c=o[0],i=o[1],l=Object(a.useState)(!1),s=Object(d.a)(l,2),u=s[0],p=s[1];Object(a.useEffect)((function(){!t.current&&e.ready&&(t.current=!0,Ia.load().then((function(){console.log("BodyPix loaded"),i(!0)})).catch(console.error))}),[e]);var m=Object(a.useCallback)(Object(E.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}throw new Error('Please wait for the model to load before calling "predict"');case 2:return t.next=4,Ia.predict(e.getVideoAsImageData());case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),[c,e]);return Object(a.useEffect)((function(){!c||n.current||u||(n.current=!0,m().then((function(){p(!0)})))}),[m,c,u]),u?m:null}();return r.a.createElement(Ta.Provider,{value:n},t)},Ma=function(){var e=w(),t=function(){var e=Object(a.useContext)(Ta);if(void 0===e)throw new Error("useBodyPix must be used within a BodyPixProvider");return e}(),n=t&&e.ready,r=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useRef)(),o=Object(a.useRef)(),c=Object(a.useCallback)((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t.current=a,e.current=a,r.current=0,n.current=0,o.current=0}),[]),i=Object(a.useCallback)((function(){o.current=0}),[]),l=Object(a.useCallback)((function(a){var l=!1;t.current||(l=!0,c(a));var s=a-e.current;o.current+=s;var u=0,p=0;n.current++&&(u=1e3/s,p=r.current/n.current,r.current+=u);var d=a-t.current;return e.current=a,{first:l,timestamp:a,fps:u,avgFps:p,elapsed:d,frames:n.current,lapTime:o.current,resetLapTime:i}}),[c,i]);return Object(a.useMemo)((function(){return{update:l,reset:c}}),[l,c])}(),o=function(){var e=Object(a.useRef)(),t=Tt().handlers.speech,n=Object(a.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onBeforeStartLap,a=t.onLap,r=t.onEnd,o=t.maxLaps,c=t.setLapTimeInfo,i=t.lapDuration,l=void 0===i?3e3:i,s=t.postLapDelay,u=void 0===s?1e3:s,p=t.announceSeconds,d=void 0===p||p;a&&!e.current&&(e.current={onBeforeStartLap:n,onBeforeComplete:!1,onBeforeStarted:!1,onEndCalled:!1,onLap:a,onEnd:r,maxLaps:o,numLaps:0,lapDuration:l,postLapDelay:u,setLapTimeInfo:c,announceSeconds:d},c&&e.current.setLapTimeInfo(_t))}),[]),r=Object(a.useCallback)(function(){var n=Object(E.a)(k.a.mark((function n(a){var r,o,c,i,l,s,u,p,d,m,f;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a.time,o=a.webcam,c=a.predict,i=a.stop,!e.current){n.next=40;break}if(!e.current.onBeforeStartLap||e.current.onBeforeComplete){n.next=13;break}if(!e.current.onBeforeStarted){n.next=7;break}return n.abrupt("return");case 7:return e.current.onBeforeStarted=!0,n.next=10,e.current.onBeforeStartLap({time:r,webcam:o,predict:c,stop:i});case 10:return e.current.onBeforeComplete=!0,r.resetLapTime(),n.abrupt("return");case 13:if(!e.current.maxLaps||e.current.numLaps!==e.current.maxLaps){n.next=26;break}if(!e.current.onEnd){n.next=24;break}if(e.current.onEndCalled){n.next=21;break}return e.current.onEndCalled=!0,n.next=19,e.current.onEnd({time:r,webcam:o,predict:c,stop:i});case 19:return e.current=null,n.abrupt("return",i());case 21:return n.abrupt("return");case 24:return e.current=null,n.abrupt("return",i());case 26:if(l=Math.floor(r.lapTime/100)/10,s=+Math.max(e.current.lapDuration/1e3-l,0).toFixed(1),e.current.setLapTimeInfo&&(u=Math.min(Number(s)/e.current.lapDuration*1e5,100),p=100-u,d=Ge(u),m=s.toFixed(1),f={percent:p,percentRemaining:u,color:d,secondsRemaining:m},e.current.setLapTimeInfo(f)),s&&e.current.announceSeconds&&e.current.lastSpeech!==s&&parseInt(s,10)===Number(s)&&(e.current.lastSpeech=s,t.say("".concat(s))),!(r.lapTime>=e.current.lapDuration)||e.current.handlerCalled){n.next=39;break}return e.current.numLaps++,e.current.handlerCalled=!0,e.current.handlerResolved=!1,n.next=36,e.current.onLap({time:r,webcam:o,predict:c,stop:i,lapNum:e.current.numLaps});case 36:e.current.handlerResolved=!0,n.next=40;break;case 39:r.lapTime>=e.current.lapDuration+e.current.postLapDelay&&e.current.handlerResolved&&(r.resetLapTime(),e.current.handlerCalled=!1,e.current.handlerResolved=!1);case 40:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t]),o=Object(a.useCallback)((function(){e.current=null}),[]);return Object(a.useMemo)((function(){return{clear:o,useTimer:n,handleLap:r,timerRef:e}}),[o,n,r,e])}(),c=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useState)(!1),s=Object(d.a)(l,2),u=s[0],p=s[1],m=Object(a.useCallback)((function(){o.clear(),r.reset(),c.current=!0,p(!0)}),[r,o]),f=Object(a.useCallback)((function(){c.current=!1,p(!1)}),[]),b=Object(a.useCallback)(function(){var n=Object(E.a)(k.a.mark((function n(a){var l,s,u;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=r.update(a),s={time:l,webcam:e,predict:t,timerRef:o.timerRef,useTimer:o.useTimer,stop:f},n.next=4,i.current(s);case 4:u=n.sent,o.handleLap(s),c.current?requestAnimationFrame(b):(f(),i.current=null,e.clearCanvas(),u&&u());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t,o,r,f]),g=Object(a.useCallback)(function(){var e=Object(E.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}throw new Error("The loop is not ready");case 4:if(!c.current){e.next=8;break}throw new Error("The loop is already running");case 8:if(t){e.next=12;break}throw new Error("Please wait for BodyPix to load...");case 12:if(a){e.next=14;break}throw new Error("A loop handler is required when calling loop.start");case 14:return i.current=a,m(),e.abrupt("return",requestAnimationFrame(b));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,t,m,n]);return Object(a.useMemo)((function(){return{start:g,looping:u,ready:n,stop:f}}),[g,u,f,n])},La=function(e,t){switch(t.type){case Re:return Object(R.a)(Object(R.a)({},e),{},{mode:t.value});case Te:return Object(R.a)(Object(R.a)({},e),{},{screen:Pe.screen.PLAY,players:t.value});case Le:return Ae;case Me:var n=Object(R.a)({},e);if(e.mode)n.mode=Pe.mode.DEFAULT;else{if(e.screen===Pe.screen.DEFAULT)return e;n.screen=Pe.screen.DEFAULT,n.players=Pe.players.DEFAULT}return n;default:throw new Error("Invalid action: ".concat(t.type))}},Pa=function(){var e=Ma(),t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],o=n[1],c=function(){var e=Object(a.useReducer)(La,Ae),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(a.useCallback)((function(e){if(!Ne.screen.includes(e))throw new Error("Unknown screen: ".concat(e));r({type:Ie,value:e})}),[]),c=Object(a.useCallback)((function(e){if(![].concat(Object(it.a)(Ne.mode[Pe.players.SINGLE_PLAYER]),Object(it.a)(Ne.mode[Pe.players.MULTIPLAYER])).includes(e))throw new Error("Unknown gameMode: ".concat(e));r({type:Re,value:e})}),[]),i=Object(a.useCallback)((function(e){if(!Ne.players.includes(e))throw new Error("Unknown playerMode: ".concat(e));r({type:Te,value:e})}),[]),l=Object(a.useCallback)((function(){r({type:Le})}),[]),s=Object(a.useCallback)((function(){r({type:Me})}),[]);return[n,Object(a.useMemo)((function(){return{setScreen:o,resetState:l,setGameMode:c,reverseState:s,setPlayerMode:i}}),[o,l,c,s,i])]}(),i=Object(d.a)(c,2),l=i[0],s=i[1],u=Object(a.useState)(!1),p=Object(d.a)(u,2),m=p[0],f=p[1],b=Object(a.useRef)(),g=Tt(),v=Object(a.useState)(!1),h=Object(d.a)(v,2),O=h[0],y=h[1],j=Object(a.useCallback)((function(){y(!0)}),[]),k=Object(a.useCallback)((function(){y(!1)}),[]),E=Object(a.useCallback)((function(){f(!0)}),[]),C=Object(a.useMemo)((function(){return{onHomeScreen:l.screen===Pe.screen.DEFAULT,handleBack:l.players===Pe.players.MULTIPLAYER?s.resetState:s.reverseState,toggleAudio:g.handlers.toggle,audioState:g.state,openHelp:j,closeHelp:k,helpOpen:O}}),[l,s,g,k,j,O]);return Object(a.useEffect)((function(){b.current||l.screen===Pe.screen.DEFAULT&&(b.current=!0)}),[l]),Object(a.useEffect)((function(){l.screen!==Pe.screen.DEFAULT&&l.mode!==Pe.mode.DEFAULT||!r||o(null)}),[l,r]),Object(a.useEffect)((function(){l.screen!==Pe.screen.DEFAULT&&l.mode!==Pe.mode.DEFAULT||!e.looping||e.stop()}),[l,e]),Object(a.useMemo)((function(){return{screen:{state:l,handlers:s},mode:r,loop:e,setMode:o,headerController:C,warning:{completed:m,handleCloseWarning:E}}}),[r,e,l,s,C,E,m])},Na=n(2144),Aa=Object(y.a)((function(e){return{title:{color:"red",fontStyle:"italic"},actions:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},dialogContent:{fontStyle:24},group:{marginTop:e.spacing(2)}}})),Da=Object(a.memo)((function(e){var t=e.open,n=e.handleClose,a=Aa();return r.a.createElement(ve.a,{"aria-labelledby":"warning",open:t},r.a.createElement(he.a,{disableTypography:!0,id:"warning",className:a.title},r.a.createElement(v.a,{variant:"h5"},"Warning!")),r.a.createElement(Oe.a,{dividers:!0,className:a.dialogContent},r.a.createElement(v.a,{component:"h2",variant:"h6"},"physically demanding"),r.a.createElement(v.a,{gutterBottom:!0},"Be careful when moving. Consider consulting a medical professional before playing."),r.a.createElement("div",{className:a.group},r.a.createElement(v.a,{component:"h2",variant:"h6"},"Large Space Required"),r.a.createElement(v.a,{gutterBottom:!0},"Ensure that you have a large open playing area that will allow you to move around safely."))),r.a.createElement(Na.a,{className:a.actions},r.a.createElement(fn.a,{color:"secondary",onClick:n,variant:"contained"},"Acknowledge")))})),Fa=Object(a.createContext)(),Ua=function(){var e=Object(a.useContext)(Fa);if(!e)throw new Error("useGame must be called from inside the <Game> component.");return e},_a=function(e){var t=Ua(),n=t.loop,r=t.setMode,o=e(n);return Object(a.useEffect)((function(){r(o)}),[o,r]),o},Ba=Object(a.memo)((function(e){e.webcam;var t=Pa();return r.a.createElement(Fa.Provider,{value:t},r.a.createElement(Da,{open:!t.warning.completed,handleClose:t.warning.handleCloseWarning}),r.a.createElement(we,{controller:t.headerController}),r.a.createElement(Fe,{screenState:t.screen.state}),r.a.createElement(ge,{overlay:!t.screen.state.mode,headerController:t.headerController},r.a.createElement(xa,{screen:t.screen})),r.a.createElement(nn,{screen:t.screen}))})),za=function(){return r.a.createElement("div",null,"Sorry, but this game requires a webcam. Please plug in a webcam and refresh the page.")},Ya=Object(y.a)((function(e){return{root:{maxWidth:1100,margin:"0 auto ".concat(e.spacing(2),"px")}}})),Ga=Object(a.createContext)(),Wa=function(){var e=Object(a.useContext)(Ga);if(!e)throw new Error("useMultiplayerScoreContext must be called from inside the <Game> component.");return e},Va=Object(a.memo)((function(e){var t=w(),n=t.currentDeviceId,o=t.hasVideo,c=t.cameras,i=t.autoStartDeviceId,l=Object(a.useRef)();Object(a.useEffect)((function(){o&&c.length&&(n||i)&&!l.current&&(l.current=!0,t.start().catch(console.error))}),[o,c,n,i,t]);var s=Ya(),u=Object(a.useState)([[],[]]);return r.a.createElement("main",{className:s.root},o?r.a.createElement(Ga.Provider,{value:u},r.a.createElement(pa,null,r.a.createElement(Ba,{webcam:t}))):r.a.createElement(za,null))})),Ja=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(t,["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"']).join(",")},qa=Object(h.a)({palette:{primary:{main:"#FFFFFF"},secondary:{main:"#000000"}},typography:{useNextVariants:!0,fontFamily:Ja("Orbitron"),body1:{fontWeight:600,fontFamily:Ja("Rajdhani"),fontSize:18}},overrides:{}});var Ha=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useRef)();return Object(a.useEffect)((function(){var e=setInterval((function(){window.cvReady&&(o(!0),clearInterval(e))}),200);return function(){clearInterval(e)}}),[]),Object(a.useEffect)((function(){c.current||(c.current=!0,f.a.init({selector:".background"}))})),r.a.createElement(O.a,{theme:qa},r.a.createElement(b.BrowserView,null,r.a.createElement(S,null,r.a.createElement(Ra,null,r.a.createElement(Rt,null,r.a.createElement(Nt,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null),r.a.createElement(Va,{cvReady:n}))))))),r.a.createElement(b.MobileView,null,r.a.createElement(v.a,{component:"h1",variant:"h6"},"To play Carbon Copy, open this site on a laptop or desktop computer.")))};c.a.render(r.a.createElement(Ha,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},320:function(e,t,n){var a=n(2096),r=["load","predict"];e.exports=function(){var e=new Worker(n.p+"dc76288e33712f0d689c.worker.js",{name:"[hash].worker.js"});return a(e,r),e}},341:function(e,t,n){e.exports=n(2097)},346:function(e,t,n){},361:function(e,t){},363:function(e,t){},411:function(e,t){},413:function(e,t){},438:function(e,t){},440:function(e,t){},441:function(e,t){},447:function(e,t){},449:function(e,t){},467:function(e,t){},469:function(e,t){},481:function(e,t){},484:function(e,t){},489:function(e,t){},491:function(e,t){},514:function(e,t){},607:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=607}},[[341,1,2]]]);
//# sourceMappingURL=main.a1397e57.chunk.js.map